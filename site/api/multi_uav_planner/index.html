
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python implementation of a dynamic real-time multi-UAV cooperative mission planning algorithm based on Dubins paths">
      
      
      
        <link rel="canonical" href="https://luciannita.github.io/Drone-case-study/api/multi_uav_planner/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>API Reference - Multi-UAV Planner</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../styles/extra.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Multi-UAV Planner" class="md-header__button md-logo" aria-label="Multi-UAV Planner" data-md-component="logo">
      
  <img src="../../assets/uav.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Multi-UAV Planner
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="pink"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/LucianNita/Drone-case-study" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting-started.md..." class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Multi-UAV Planner" class="md-nav__button md-logo" aria-label="Multi-UAV Planner" data-md-component="logo">
      
  <img src="../../assets/uav.png" alt="logo">

    </a>
    Multi-UAV Planner
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/LucianNita/Drone-case-study" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started.md..." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="api-reference">API Reference<a class="headerlink" href="#api-reference" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<h2 id="multi_uav_planner" class="doc doc-heading">
            <code>multi_uav_planner</code>


<a href="#multi_uav_planner" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents first">

        <p>multi_uav_planner</p>
<p>Dynamic real-time multi-UAV cooperative mission planning under multiple
constraints, based on Dubins paths and task allocation / clustering strategies. 
Python reimplementation of the methods described in (Liu et al., 2025). 
Package includes modular tools for path modeling and Dubins geometry,
plus world models, scenarios, clustering, assignment, and simulation.</p>
<h4 id="multi_uav_planner--public-entry-points">Public entry points<a class="headerlink" href="#multi_uav_planner--public-entry-points" title="Permanent link">&para;</a></h4>
<p>Typical usage pattern:</p>
<pre><code>from multi_uav_planner import (
    World,
    UAV,
    PointTask, LineTask, CircleTask, AreaTask,
    ScenarioConfig, Scenario, generate_scenario, initialize_world,
    simulate_mission,
    AlgorithmType,
)

# 1) Build or generate a scenario
cfg = ScenarioConfig()
scenario = generate_scenario(cfg)

# 2) Create an empty World and initialize it from the scenario
world = World(tasks={}, uavs={})
initialize_world(world, scenario)

# 3) Run simulation
simulate_mission(world, scenario, dt=0.1)

# 4) Analyze results with post_processing.RunLog, aggregate_metrics, etc.
</code></pre>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.AlgorithmType" class="doc doc-heading">
            <code>AlgorithmType</code>


<a href="#multi_uav_planner.AlgorithmType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>



        <p>Identifier for planner/algorithm selection; stored in scenario metadata.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.AreaTask" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">AreaTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">state</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">heading_enforcement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">heading</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">worked_by_uav</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">pass_length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">pass_spacing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">num_passes</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="n">side</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.AreaTask" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Task(id: int, position: Tuple[float, float], state: Literal[0, 1, 2] = 0, heading_enforcement: bool = False, heading: Optional[float] = None, worked_by_uav: Optional[int] = None)

  
      dataclass
   (multi_uav_planner.world_models.Task)" href="#multi_uav_planner.Task">Task</a></code></p>



        <p>A rectangular/strip-style area coverage task. The planner is expected to
produce multiple passes to cover the area.</p>
<p>Attributes:
- pass_length: length of each pass in meters (default: $<span class="arithmatex">\(10.0\)</span>$).
- pass_spacing: lateral spacing between passes in meters (default: $<span class="arithmatex">\(1.0\)</span>$).
- num_passes: number of passes required (default: $<span class="arithmatex">\(3\)</span>$).
- side: side to begin the first pass: $<span class="arithmatex">\('left'\)</span>$ or $<span class="arithmatex">\('right'\)</span>$.</p>
<p>Note:
- This data model does not include the actual polygon describing the area;
  it merely encodes sweep parameters. Geometry generation is delegated to
  higher-level components.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.CircleTask" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">CircleTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">state</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">heading_enforcement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">heading</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">worked_by_uav</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span> <span class="n">side</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="s1">&#39;right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.CircleTask" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Task(id: int, position: Tuple[float, float], state: Literal[0, 1, 2] = 0, heading_enforcement: bool = False, heading: Optional[float] = None, worked_by_uav: Optional[int] = None)

  
      dataclass
   (multi_uav_planner.world_models.Task)" href="#multi_uav_planner.Task">Task</a></code></p>



        <p>A circular-turn task centered at the task position.</p>
<p>Attributes:
- radius: radius of the circle in meters (default: $<span class="arithmatex">\(10.0\)</span>$).
- side: which side to traverse first; either $<span class="arithmatex">\('left'\)</span>$ or $<span class="arithmatex">\('right'\)</span>$.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.CurveSegment" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">CurveSegment</span><span class="p">(</span><span class="n">center</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">theta_s</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">d_theta</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.CurveSegment" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Segment()

  
      dataclass
   (multi_uav_planner.path_model.Segment)" href="#multi_uav_planner.Segment">Segment</a></code></p>



        <p>A circular-arc segment.</p>
<p>Attributes:
- center: center point of the circle (xc, yc).
- radius: positive radius $<span class="arithmatex">\(R &gt; 0\)</span>$.
- theta_s: start angle in radians (measured from the positive x-axis).
- d_theta: signed angular sweep in radians; positive =&gt; CCW rotation,
  negative =&gt; CW rotation.</p>
<p>Notes and constraints:
- The arc length is given by $<span class="arithmatex">\(L = R \cdot |\Delta  heta|\)</span>$ where
  $<span class="arithmatex">\(\Delta  heta =  ext{d\_theta}\)</span>$.
- The implementation validates that $<span class="arithmatex">\(R &gt; 0\)</span>$.
- By default the class disallows sweeps with absolute value greater than
  one full revolution; i.e. it enforces
  $<span class="arithmatex">\(|       ext{d\_theta}| \le 2\pi\)</span>$ (with a tiny tolerance). Adjust or remove
  this guard if you need multi-revolution arcs.
- Angles are handled in radians. Use angle_at(t) to interpolate the
  angular position at normalized parameter $<span class="arithmatex">\(t \in [0,1]\)</span>$.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.CurveSegment.angle_at" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">angle_at</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

<a href="#multi_uav_planner.CurveSegment.angle_at" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the angular coordinate at normalized parameter $<span class="arithmatex">\(t \in [0,1]\)</span>$.</p>
<pre><code>    The angle is interpolated linearly:
    $$      heta(t) =       heta_s + t \cdot \Delta heta.$$

    Raises:
    - ValueError if $$t
</code></pre>
<p>otin [0,1]$$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">angle_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the angular coordinate at normalized parameter $$t \in [0,1]$$.</span>

<span class="sd">    The angle is interpolated linearly:</span>
<span class="sd">    $$\theta(t) = \theta_s + t \cdot \Delta\theta.$$</span>

<span class="sd">    Raises:</span>
<span class="sd">    - ValueError if $$t \notin [0,1]$$.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;t must be in [0,1]&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">theta_s</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_theta</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.CurveSegment.end_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">end_point</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Point</span></code>

<a href="#multi_uav_planner.CurveSegment.end_point" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the point at $<span class="arithmatex">\(t = 1\)</span>$ (end of the arc).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">end_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the point at $$t = 1$$ (end of the arc).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.CurveSegment.length" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">length</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

<a href="#multi_uav_planner.CurveSegment.length" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return arc length: $<span class="arithmatex">\(L = R \cdot |\Delta        heta|\)</span>$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return arc length: $$L = R \cdot |\Delta\theta|$$.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">d_theta</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.CurveSegment.point_at" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">point_at</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span></code>

<a href="#multi_uav_planner.CurveSegment.point_at" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the Cartesian point on the arc at normalized parameter $<span class="arithmatex">\(t\)</span>$.</p>
<p>Uses:
$<span class="arithmatex">\(x = x_c + R \cos(     heta(t)), \quad y = y_c + R \sin(       heta(t)).\)</span>$</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">point_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the Cartesian point on the arc at normalized parameter $$t$$.</span>

<span class="sd">    Uses:</span>
<span class="sd">    $$x = x_c + R \cos(\theta(t)), \quad y = y_c + R \sin(\theta(t)).$$</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_at</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.CurveSegment.sample" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]</span></code>

<a href="#multi_uav_planner.CurveSegment.sample" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return $<span class="arithmatex">\(n\)</span>$ points sampled along the circular arc, including endpoints.</p>
<p>Samples are taken at uniformly spaced parameter values $<span class="arithmatex">\(t\)</span>$ in
$<span class="arithmatex">\([0,1]\)</span>$, so the angular spacing is uniform in parameter, not
necessarily uniform in arc-length for non-constant curvature (not
applicable here since curvature is constant).
Requires $<span class="arithmatex">\(n \ge 2\)</span>$.</p>
<p>Raises:
- ValueError if $<span class="arithmatex">\(n &lt; 2\)</span>$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return $$n$$ points sampled along the circular arc, including endpoints.</span>

<span class="sd">    Samples are taken at uniformly spaced parameter values $$t$$ in</span>
<span class="sd">    $$[0,1]$$, so the angular spacing is uniform in parameter, not</span>
<span class="sd">    necessarily uniform in arc-length for non-constant curvature (not</span>
<span class="sd">    applicable here since curvature is constant).</span>
<span class="sd">    Requires $$n \ge 2$$.</span>

<span class="sd">    Raises:</span>
<span class="sd">    - ValueError if $$n &lt; 2$$.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n must be &gt;= 2&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">point_at</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.CurveSegment.start_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_point</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Point</span></code>

<a href="#multi_uav_planner.CurveSegment.start_point" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the point at $<span class="arithmatex">\(t = 0\)</span>$ (start of the arc).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the point at $$t = 0$$ (start of the arc).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">point_at</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Event" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Event</span><span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">kind</span><span class="p">:</span> <span class="n">EventType</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">Payload</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Event" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>A scheduled event in the simulation or planner timeline.</p>
<p>Ordering:
- Events are ordered by their $<span class="arithmatex">\(time\)</span>$ field so they can be stored in
  a priority queue or list and processed chronologically.</p>
<p>Fields:
- time: trigger time (float, seconds).
- kind: an EventType value.
- id: user-defined integer id for the event (for bookkeeping).
- payload: additional data whose type depends on $<span class="arithmatex">\(kind\)</span>$. The payload
  is excluded from ordering comparisons.</p>
<p>Post-initialization checks:
- For $$    ext{EventType.NEW_TASK}$$, payload must be a non-empty $<span class="arithmatex">\(List[Task]\)</span>$.
- For $$    ext{EventType.UAV_DAMAGE}$$, payload must be an $<span class="arithmatex">\(int\)</span>$ representing the UAV id.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.Event.should_trigger" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">should_trigger</span><span class="p">(</span><span class="n">world_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#multi_uav_planner.Event.should_trigger" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return True if the event should trigger at or before the given world_time.</p>
<p>This simple check allows event processing loops to pop events in time
order and decide whether they are ready to fire.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\world_models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">should_trigger</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">world_time</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return True if the event should trigger at or before the given world_time.</span>

<span class="sd">    This simple check allows event processing loops to pop events in time</span>
<span class="sd">    order and decide whether they are ready to fire.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">world_time</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.EventType" class="doc doc-heading">
            <code>EventType</code>


<a href="#multi_uav_planner.EventType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.IntEnum">IntEnum</span></code></p>



        <p>Event kind enumeration used for discrete simulation scheduling.
- UAV_DAMAGE: payload is a UAV id (int) indicating the UAV becomes damaged.
- NEW_TASK: payload is a non-empty List[Task] which should be added to the world.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.LineSegment" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">LineSegment</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="n">Point</span><span class="p">,</span> <span class="n">end</span><span class="p">:</span> <span class="n">Point</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.LineSegment" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Segment()

  
      dataclass
   (multi_uav_planner.path_model.Segment)" href="#multi_uav_planner.Segment">Segment</a></code></p>



        <p>A straight line segment between two points.</p>
<p>Attributes:
- start: starting point as (x, y).
- end: ending point as (x, y).</p>
<p>Semantics:
- length() returns the Euclidean distance between start and end.
- point_at(t) returns the linear interpolation at normalized parameter
  $<span class="arithmatex">\(t \in [0,1]\)</span>$ such that:
  $$        ext{point_at}(0) =     ext{start}, \quad       ext{point_at}(1) =     ext{end}.$$
- sample(n) returns $<span class="arithmatex">\(n\)</span>$ evenly spaced points along the segment,
  including endpoints; requires $<span class="arithmatex">\(n \ge 2\)</span>$.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.LineSegment.end_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">end_point</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Point</span></code>

<a href="#multi_uav_planner.LineSegment.end_point" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the end point of the segment.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">end_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the end point of the segment.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">end</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.LineSegment.point_at" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">point_at</span><span class="p">(</span><span class="n">t</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span></code>

<a href="#multi_uav_planner.LineSegment.point_at" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the point at normalized parameter $<span class="arithmatex">\(t \in [0,1]\)</span>$.</p>
<pre><code>    Uses linear interpolation:
    $$x = x_0 + t (x_1 - x_0), \quad y = y_0 + t (y_1 - y_0).$$

    Raises:
    - ValueError if $$t
</code></pre>
<p>otin [0,1]$$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">point_at</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the point at normalized parameter $$t \in [0,1]$$.</span>

<span class="sd">    Uses linear interpolation:</span>
<span class="sd">    $$x = x_0 + t (x_1 - x_0), \quad y = y_0 + t (y_1 - y_0).$$</span>

<span class="sd">    Raises:</span>
<span class="sd">    - ValueError if $$t \notin [0,1]$$.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mf">1.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;t must be in [0,1]&quot;</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">t</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.LineSegment.sample" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sample</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]</span></code>

<a href="#multi_uav_planner.LineSegment.sample" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return $<span class="arithmatex">\(n\)</span>$ points sampled uniformly along the segment.</p>
<p>The returned list contains the start and end points and requires
$<span class="arithmatex">\(n \ge 2\)</span>$ to include both endpoints.</p>
<p>Raises:
- ValueError if $<span class="arithmatex">\(n &lt; 2\)</span>$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return $$n$$ points sampled uniformly along the segment.</span>

<span class="sd">    The returned list contains the start and end points and requires</span>
<span class="sd">    $$n \ge 2$$ to include both endpoints.</span>

<span class="sd">    Raises:</span>
<span class="sd">    - ValueError if $$n &lt; 2$$.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n must be &gt;= 2&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">point_at</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.LineSegment.start_point" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start_point</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Point</span></code>

<a href="#multi_uav_planner.LineSegment.start_point" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the start point of the segment.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">start_point</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the start point of the segment.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.LineTask" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">LineTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">state</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">heading_enforcement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">heading</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">worked_by_uav</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.LineTask" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Task(id: int, position: Tuple[float, float], state: Literal[0, 1, 2] = 0, heading_enforcement: bool = False, heading: Optional[float] = None, worked_by_uav: Optional[int] = None)

  
      dataclass
   (multi_uav_planner.world_models.Task)" href="#multi_uav_planner.Task">Task</a></code></p>



        <p>A line-type task that indicates the UAV should traverse a short line
segment centered at the task position. Typical fields:
- length: length of the line in meters (default: $<span class="arithmatex">\(10.0\)</span>$).</p>
<p>Interpretation:
- The task position can be considered the midpoint or an endpoint;
  specific geometric handling is the responsibility of the planner.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Path" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Path</span><span class="p">(</span><span class="n">segments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Segment</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Path" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>A sequence of segments forming a continuous path.</p>
<p>Attributes:
- segments: ordered list of Segment instances.</p>
<p>Methods:
- length(): total length obtained by summing segment lengths.
- sample(samples_per_segment): sample each segment with the given
  number of samples and concatenate results. To avoid duplicate points
  at segment boundaries the first point of each subsequent segment is
  omitted (since it equals the previous segment's last point).</p>
<p>Sampling details:
- Each segment is sampled with exactly $$   ext{samples_per_segment}$$
  points (requires $<span class="arithmatex">\(\ge 2\)</span>$).
- The returned list length will be:
  $$        ext{len} = N \cdot S - (N - 1)$$ where $<span class="arithmatex">\(N\)</span>$ is the number of
  segments and $<span class="arithmatex">\(S\)</span>$ is $$  ext{samples_per_segment}$$ because junction
  points are deduplicated.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.Path.length" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">length</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">float</span></code>

<a href="#multi_uav_planner.Path.length" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return the total length of the path (sum of segment lengths).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">length</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the total length of the path (sum of segment lengths).&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.Path.sample" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sample</span><span class="p">(</span><span class="n">samples_per_segment</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]</span></code>

<a href="#multi_uav_planner.Path.sample" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sample each segment and concatenate results, removing duplicate junctions.</p>
<p>Parameters:
- samples_per_segment: integer $<span class="arithmatex">\(S \ge 2\)</span>$, number of samples per segment.</p>
<p>Returns:
- List[Point]: concatenated sampled points for the whole path.</p>
<p>Behavior:
- For segment index $<span class="arithmatex">\(i &gt; 0\)</span>$ the first sampled point of that segment
  is dropped to avoid duplicating the shared endpoint with the
  previous segment.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">samples_per_segment</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sample each segment and concatenate results, removing duplicate junctions.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - samples_per_segment: integer $$S \ge 2$$, number of samples per segment.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - List[Point]: concatenated sampled points for the whole path.</span>

<span class="sd">    Behavior:</span>
<span class="sd">    - For segment index $$i &gt; 0$$ the first sampled point of that segment</span>
<span class="sd">      is dropped to avoid duplicating the shared endpoint with the</span>
<span class="sd">      previous segment.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pts</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Point</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">seg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">segments</span><span class="p">):</span>
        <span class="n">pts_seg</span> <span class="o">=</span> <span class="n">seg</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">samples_per_segment</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># drop the first point to avoid duplicating the junction</span>
            <span class="c1"># (the first point of seg equals the last point of previous seg)</span>
            <span class="n">pts_seg</span> <span class="o">=</span> <span class="n">pts_seg</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">pts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pts_seg</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pts</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.PointTask" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">PointTask</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">state</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">heading_enforcement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">heading</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">worked_by_uav</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.PointTask" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="Task(id: int, position: Tuple[float, float], state: Literal[0, 1, 2] = 0, heading_enforcement: bool = False, heading: Optional[float] = None, worked_by_uav: Optional[int] = None)

  
      dataclass
   (multi_uav_planner.world_models.Task)" href="#multi_uav_planner.Task">Task</a></code></p>



        <p>A task located at a single point. No additional fields beyond Task.
Use for simple point-inspection or waypoint-style tasks.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.RunLog" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">RunLog</span><span class="p">(</span><span class="n">snapshots</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Snapshot</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span> <span class="n">stages</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;init&#39;</span><span class="p">,</span> <span class="s1">&#39;triggering_events&#39;</span><span class="p">,</span> <span class="s1">&#39;assignment&#39;</span><span class="p">,</span> <span class="s1">&#39;after_move&#39;</span><span class="p">,</span> <span class="s1">&#39;end_tick (post_coverage)&#39;</span><span class="p">,</span> <span class="s1">&#39;planned_return&#39;</span><span class="p">))</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.RunLog" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Collect time-indexed snapshots during a simulation run.</p>
<p>Use the <code>hook()</code> method to obtain a callable suitable for <code>simulate_mission(on_step=...)</code>
which will append snapshots for the stages listed in <code>stages</code>.</p>
<p>Attributes:
- snapshots: list of Snapshot objects (in chronological order).
- stages: tuple of stage tags accepted by the hook (default set matches simulate_mission tags).</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.RunLog.hook" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hook</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">World</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]</span></code>

<a href="#multi_uav_planner.RunLog.hook" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return an <code>on_step(world, stage)</code> callback that appends snapshots.</p>
<p>The callback copies current sets and per-UAV fields so that the RunLog
contains stable historical data (not references into mutable objects).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">hook</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">World</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return an `on_step(world, stage)` callback that appends snapshots.</span>

<span class="sd">    The callback copies current sets and per-UAV fields so that the RunLog</span>
<span class="sd">    contains stable historical data (not references into mutable objects).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">on_step</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">stage</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">stage</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stages</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">snap</span> <span class="o">=</span> <span class="n">Snapshot</span><span class="p">(</span>
            <span class="n">time</span><span class="o">=</span><span class="n">world</span><span class="o">.</span><span class="n">time</span><span class="p">,</span>
            <span class="n">unassigned</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">unassigned</span><span class="p">),</span>
            <span class="n">assigned</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">assigned</span><span class="p">),</span>
            <span class="n">completed</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">completed</span><span class="p">),</span>
            <span class="n">uav_positions</span><span class="o">=</span><span class="p">{</span><span class="n">uid</span><span class="p">:</span> <span class="n">u</span><span class="o">.</span><span class="n">position</span> <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
            <span class="n">uav_states</span><span class="o">=</span><span class="p">{</span><span class="n">uid</span><span class="p">:</span> <span class="n">u</span><span class="o">.</span><span class="n">state</span> <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
            <span class="n">uav_range</span><span class="o">=</span><span class="p">{</span><span class="n">uid</span><span class="p">:</span> <span class="n">u</span><span class="o">.</span><span class="n">current_range</span> <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="o">.</span><span class="n">items</span><span class="p">()},</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">snap</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">on_step</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.RunLog.to_json" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">to_json</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

<a href="#multi_uav_planner.RunLog.to_json" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Convert the collected snapshots into a JSON-serializable dict.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">to_json</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert the collected snapshots into a JSON-serializable dict.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;snapshots&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">time</span><span class="p">,</span>
                <span class="s2">&quot;unassigned&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">unassigned</span><span class="p">,</span>
                <span class="s2">&quot;assigned&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">assigned</span><span class="p">,</span>
                <span class="s2">&quot;completed&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">completed</span><span class="p">,</span>
                <span class="s2">&quot;uav_positions&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">uav_positions</span><span class="p">,</span>
                <span class="s2">&quot;uav_states&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">uav_states</span><span class="p">,</span>
                <span class="s2">&quot;uav_range&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">uav_range</span><span class="p">,</span>
            <span class="p">}</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">snapshots</span>
        <span class="p">]</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Scenario" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Scenario</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">ScenarioConfig</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">uavs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">UAV</span><span class="p">],</span> <span class="n">base</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">events</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Event</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span> <span class="n">alg_type</span><span class="p">:</span> <span class="n">AlgorithmType</span> <span class="o">=</span> <span class="n">AlgorithmType</span><span class="o">.</span><span class="n">PRBDD</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Scenario" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Container holding the result of scenario generation.</p>
<p>Attributes:
- $<span class="arithmatex">\(config\)</span>$: the ScenarioConfig used to produce this scenario.
- $<span class="arithmatex">\(tasks\)</span>$: list of Task objects created.
- $<span class="arithmatex">\(uavs\)</span>$: list of UAV objects created and initially located at the base.
- $<span class="arithmatex">\(base\)</span>$: base pose $<span class="arithmatex">\((x,y,heading)\)</span>$ used to initialize UAVs.
- $<span class="arithmatex">\(events\)</span>$: sorted list of Event objects (may be empty).
- $<span class="arithmatex">\(alg\_type\)</span>$: chosen AlgorithmType for later use by planners.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.ScenarioConfig" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ScenarioConfig</span><span class="p">(</span><span class="n">base</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">area_width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2500.0</span><span class="p">,</span> <span class="n">area_height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">2500.0</span><span class="p">,</span> <span class="n">n_uavs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span> <span class="n">n_tasks</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">max_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1000000.0</span><span class="p">,</span> <span class="n">p_point</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.6</span><span class="p">,</span> <span class="n">p_line</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.2</span><span class="p">,</span> <span class="n">p_circle</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">p_area</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">uav_speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">17.5</span><span class="p">,</span> <span class="n">turn_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">80.0</span><span class="p">,</span> <span class="n">total_range</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">max_range</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10000.0</span><span class="p">,</span> <span class="n">tolerances</span><span class="p">:</span> <span class="n">Tolerances</span> <span class="o">=</span> <span class="n">Tolerances</span><span class="p">(),</span> <span class="n">alg_type</span><span class="p">:</span> <span class="n">AlgorithmType</span> <span class="o">=</span> <span class="n">AlgorithmType</span><span class="o">.</span><span class="n">PRBDD</span><span class="p">,</span> <span class="n">scenario_type</span><span class="p">:</span> <span class="n">ScenarioType</span> <span class="o">=</span> <span class="n">ScenarioType</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span> <span class="n">n_new_task</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n_damage</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">ts_new_task</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">tf_new_task</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">ts_damage</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">tf_damage</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.ScenarioConfig" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Configuration options controlling random scenario generation.</p>
<p>Key fields:
- $<span class="arithmatex">\(base\)</span>$: base pose as $<span class="arithmatex">\((x, y, heading)\)</span>$ (heading in radians).
- $<span class="arithmatex">\(area\_width\)</span>$, $<span class="arithmatex">\(area\_height\)</span>$: sampling rectangle size for task positions.
- $<span class="arithmatex">\(n\_uavs\)</span>$, $<span class="arithmatex">\(n\_tasks\)</span>$: numbers of initial UAVs and tasks.
- Task-type probabilities $<span class="arithmatex">\(p\_point\)</span>$, $<span class="arithmatex">\(p\_line\)</span>$, $<span class="arithmatex">\(p\_circle\)</span>$, $<span class="arithmatex">\(p\_area\)</span>$ sum to 1.0
  (used by the random sampler to choose task kinds).
- UAV dynamics: $<span class="arithmatex">\(uav\_speed\)</span>$, $<span class="arithmatex">\(turn\_radius\)</span>$, $<span class="arithmatex">\(total\_range\)</span>$, $<span class="arithmatex">\(max\_range\)</span>$.
- Tolerances: defaults are provided and are propagated to the World on init.
- Scenario dynamics: $<span class="arithmatex">\(scenario\_type\)</span>$ determines whether to create delayed
  new-task or damage events; counts and time windows control event creation.
- $<span class="arithmatex">\(seed\)</span>$: RNG seed for reproducibility.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.ScenarioType" class="doc doc-heading">
            <code>ScenarioType</code>


<a href="#multi_uav_planner.ScenarioType" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>



        <p>Kinds of dynamic scenario events supported.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Segment" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Segment</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Segment" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>



        <p>Abstract interface for a path segment.</p>
<p>A Segment represents a contiguous piece of a geometric path. Concrete
implementations must provide:
- length(): length of the segment (non-negative float).
- sample(n): an ordered list of $<span class="arithmatex">\(n\)</span>$ points sampled along the segment,
  including both endpoints.
- start_point() and end_point(): coordinates of the segment endpoints.</p>
<p>Implementations should accept the normalized parameter $<span class="arithmatex">\(t \in [0,1]\)</span>$
for point evaluation (if they expose such a method).</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Snapshot" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Snapshot</span><span class="p">(</span><span class="n">time</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">unassigned</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">assigned</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">completed</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">uav_positions</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">uav_states</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="n">uav_range</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Snapshot" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Immutable data snapshot captured at a simulation stage.</p>
<p>Fields:
- time: simulation time for the snapshot.
- unassigned, assigned, completed: sorted lists of task ids (copied at capture time).
- uav_positions: map uav_id -&gt; (x, y, heading).
- uav_states: map uav_id -&gt; state code (0 idle, 1 transit, 2 busy, 3 damaged).
- uav_range: map uav_id -&gt; cumulative executed distance (meters) at snapshot time.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Task" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Task</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">state</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">heading_enforcement</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">heading</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">worked_by_uav</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Task" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Base class for a task (work item) to be performed by a UAV.</p>
<p>Common fields:
- id: unique integer identifier for the task.
- position: 2D coordinates $<span class="arithmatex">\((x, y)\)</span>$ representing the task location.
- state: task lifecycle state with values:
    - $<span class="arithmatex">\(0\)</span>$: unassigned
    - $<span class="arithmatex">\(1\)</span>$: assigned
    - $<span class="arithmatex">\(2\)</span>$: completed
  The type is declared as a Literal for clarity.
- heading_enforcement: if True, the task requires the UAV to arrive
  with a specific heading; otherwise arrival heading is unconstrained.
- heading: optional heading in radians that is meaningful only when
  $<span class="arithmatex">\(heading\_enforcement\)</span>$ is True.
- worked_by_uav: optional id of the UAV currently assigned or working the task.</p>
<p>Note:
- This class carries only lightweight metadata; task execution details
  (e.g., how to traverse an AreaTask) are handled elsewhere.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.TaskClusterResult" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">TaskClusterResult</span><span class="p">(</span><span class="n">clusters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Task</span><span class="p">]],</span> <span class="n">centers</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">task_to_cluster</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.TaskClusterResult" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Result container for K-means task clustering.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="multi_uav_planner.TaskClusterResult.clusters">clusters</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Task(id: int, position: Tuple[float, float], state: Literal[0, 1, 2] = 0, heading_enforcement: bool = False, heading: Optional[float] = None, worked_by_uav: Optional[int] = None)

  
      dataclass
   (multi_uav_planner.world_models.Task)" href="#multi_uav_planner.Task">Task</a>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping from cluster index -&gt; list of Task objects assigned
to that cluster. Keys are integers in $<span class="arithmatex">\([0, K-1]\)</span>$.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="multi_uav_planner.TaskClusterResult.centers">centers</span></code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Numpy array of shape $<span class="arithmatex">\((K, 2)\)</span>$ containing cluster center
coordinates $<span class="arithmatex">\((x, y)\)</span>$ for each cluster index.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="multi_uav_planner.TaskClusterResult.task_to_cluster">task_to_cluster</span></code></td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Mapping from task id (int) to the assigned cluster index.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.TimeRegistry" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">TimeRegistry</span><span class="p">(</span><span class="n">wall</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span> <span class="n">cpu</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span> <span class="n">calls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">())</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.TimeRegistry" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Collect and accumulate timing statistics across labeled operations.</p>
<p>Use-case: register timings from many calls to the same labeled operation
and later query aggregated totals and averages.</p>
<p>Stored fields:
- wall: map label -&gt; total wall-clock seconds.
- cpu: map label -&gt; total CPU seconds.
- calls: map label -&gt; number of times the label was recorded.</p>
<p>Methods:
- add(label, wall, cpu): add a single timing record.
- summary(): return a dict keyed by label with aggregated totals and averages.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.TimeRegistry.add" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wall</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span></code>

<a href="#multi_uav_planner.TimeRegistry.add" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Accumulate one timing measurement for the given label.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wall</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">cpu</span><span class="p">:</span> <span class="nb">float</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Accumulate one timing measurement for the given label.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wall</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wall</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">wall</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">+</span> <span class="n">cpu</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.TimeRegistry.summary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">summary</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span></code>

<a href="#multi_uav_planner.TimeRegistry.summary" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return per-label aggregated stats including totals and averages.</p>
<p>For each label the returned dict contains:
- wall_total, cpu_total, calls, wall_avg, cpu_avg</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">summary</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return per-label aggregated stats including totals and averages.</span>

<span class="sd">    For each label the returned dict contains:</span>
<span class="sd">    - wall_total, cpu_total, calls, wall_avg, cpu_avg</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">out</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wall</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calls</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">out</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;wall_total&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">wall</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
            <span class="s2">&quot;cpu_total&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="p">[</span><span class="n">k</span><span class="p">],</span>
            <span class="s2">&quot;calls&quot;</span><span class="p">:</span> <span class="n">n</span><span class="p">,</span>
            <span class="s2">&quot;wall_avg&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">wall</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">/</span> <span class="n">n</span><span class="p">,</span>
            <span class="s2">&quot;cpu_avg&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cpu</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">/</span> <span class="n">n</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="k">return</span> <span class="n">out</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Timer" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Timer</span><span class="p">(</span><span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Timer" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Context manager that measures wall-clock and CPU time for a code block.</p>


<details class="usage" open>
  <summary>Usage</summary>
  <p>with Timer("label") as t:...  # code to profile
print(t.elapsed_wall, t.elapsed_cpu)</p>
</details>        <p>Attributes:
- label: user-supplied name to identify the timed block.
- start_wall: wall-clock timestamp recorded on entry (perf_counter).
- start_cpu: process CPU time recorded on entry (process_time).
- elapsed_wall: wall-clock duration on exit (seconds).
- elapsed_cpu: CPU time duration on exit (seconds).</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.Tolerances" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">Tolerances</span><span class="p">(</span><span class="n">pos</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span> <span class="n">ang</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e-06</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.Tolerances" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Numeric tolerances used across the planner.</p>
<p>Attributes:
- pos: position tolerance in meters (default: $<span class="arithmatex">\(1\mathrm{e}{-3}\)</span>$).
- ang: angular tolerance in radians (default: $<span class="arithmatex">\(1\mathrm{e}{-3}\)</span>$).
- time: time epsilon in seconds (default: $<span class="arithmatex">\(1\mathrm{e}{-6}\)</span>$).</p>
<p>Use an instance of this class to centralize tolerance choices so that
assertions and proximity checks remain consistent across modules.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.UAV" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">UAV</span><span class="p">(</span><span class="nb">id</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">speed</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">17.5</span><span class="p">,</span> <span class="n">turn_radius</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">80.0</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cluster</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">cluster_CoG</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">current_task</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">assigned_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">current_range</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">max_range</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10000.0</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.UAV" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Represents the state and capabilities of a single UAV.</p>
<p>Fields:
- id: integer UAV identifier.
- position: current pose as $<span class="arithmatex">\((x, y, heading)\)</span>$; heading in radians.
- speed: nominal cruise speed in meters per second.
- turn_radius: minimum turning radius in meters (used for path generation).
- state: integer UAV status:
    - $<span class="arithmatex">\(0\)</span>$: idle
    - $<span class="arithmatex">\(1\)</span>$: in-transit (moving to a target)
    - $<span class="arithmatex">\(2\)</span>$: busy (executing a task)
    - $<span class="arithmatex">\(3\)</span>$: damaged/unavailable
- cluster: optional set of assigned task ids (useful for clustering-based planners).
- cluster_CoG: optional center-of-gravity coordinates for the cluster.
- current_task: optional id of the task currently being executed.
- assigned_path: optional Path instance representing planned route.
- current_range: current remaining range in meters.
- max_range: maximum mission range in meters.</p>
<p>Remarks:
- Many fields are optional so the planner can annotate UAVs gradually
  (e.g., assign a path only when planning is completed).</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="multi_uav_planner.World" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">World</span><span class="p">(</span><span class="n">tasks</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Task</span><span class="p">],</span> <span class="n">uavs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">UAV</span><span class="p">],</span> <span class="n">base</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="n">time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">events</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Event</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span> <span class="n">events_cursor</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">unassigned</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">assigned</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">completed</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">idle_uavs</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">transit_uavs</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">busy_uavs</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">damaged_uavs</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span> <span class="n">tols</span><span class="p">:</span> <span class="n">Tolerances</span> <span class="o">=</span> <span class="n">Tolerances</span><span class="p">())</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#multi_uav_planner.World" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">



        <p>Global container holding the planner simulation state.</p>
<p>Responsibilities:
- Maintain dictionaries of tasks and UAVs keyed by id.
- Track base location and global time.
- Hold pending events and a cursor for sequential event processing.
- Maintain partitions of task and UAV id sets (unassigned/assigned/completed,
  idle/transit/busy/damaged) to enable fast membership checks.</p>
<p>Fields:
- tasks: Dict[id, Task] containing all task objects in the world.
- uavs: Dict[id, UAV] containing UAV state objects.
- base: base pose as $<span class="arithmatex">\((x, y, heading)\)</span>$ (heading used when returning to base).
- time: current simulation/planner time (float seconds).
- events: chronological list of scheduled Event objects.
- events_cursor: index used when iterating events incrementally.
- unassigned/assigned/completed: sets partitioning task ids.
- idle_uavs/transit_uavs/busy_uavs/damaged_uavs: sets partitioning UAV ids.
- tols: Tolerances instance controlling numeric comparisons.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.World.at_base" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">at_base</span><span class="p">(</span><span class="n">p_tol</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">a_tol</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#multi_uav_planner.World.at_base" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return True if all non-damaged UAVs are within positional and (optionally)
angular tolerance of the base.</p>
        <ul>
<li>$<span class="arithmatex">\(p\_tol\)</span>$: optional override for the position tolerance (meters).
            If None, uses $$    ext{tols.pos}$$.</li>
<li>$<span class="arithmatex">\(a\_tol\)</span>$: optional override for angular tolerance (radians).
            If None, uses $$    ext{tols.ang}$$.</li>
</ul>
<p>Notes:
- Damaged UAVs (state == $<span class="arithmatex">\(3\)</span><span class="arithmatex">\() are ignored in this check.
- The angular comparison is present but commented out by default. The
  commented code computes the minimal signed angular difference using
  a standard wrap-to-\)</span><span class="arithmatex">\([-\pi,\pi]\)</span>$ formula:
  $$
    \left| ig( (h - bh + \pi) mod 2\pi ig) - \pi 
ight|
  $$
  which yields the smallest absolute angular difference between
  UAV heading $<span class="arithmatex">\(h\)</span>$ and base heading $<span class="arithmatex">\(bh\)</span>$. Uncomment those lines
  if heading alignment to base should be enforced.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\world_models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span><span class="w"> </span><span class="nf">at_base</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p_tol</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">a_tol</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return True if all non-damaged UAVs are within positional and (optionally)</span>
<span class="sd">        angular tolerance of the base.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        - $$p\_tol$$: optional override for the position tolerance (meters).</span>
<span class="sd">                    If None, uses $$\text{tols.pos}$$.</span>
<span class="sd">        - $$a\_tol$$: optional override for angular tolerance (radians).</span>
<span class="sd">                    If None, uses $$\text{tols.ang}$$.</span>

<span class="sd">        Notes:</span>
<span class="sd">        - Damaged UAVs (state == $$3$$) are ignored in this check.</span>
<span class="sd">        - The angular comparison is present but commented out by default. The</span>
<span class="sd">          commented code computes the minimal signed angular difference using</span>
<span class="sd">          a standard wrap-to-$$[-\pi,\pi]$$ formula:</span>
<span class="sd">          $$</span>
<span class="sd">            \left| \big( (h - bh + \pi) \bmod 2\pi \big) - \pi \right|</span>
<span class="sd">          $$</span>
<span class="sd">          which yields the smallest absolute angular difference between</span>
<span class="sd">          UAV heading $$h$$ and base heading $$bh$$. Uncomment those lines</span>
<span class="sd">          if heading alignment to base should be enforced.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">p_tol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tols</span><span class="o">.</span><span class="n">pos</span> <span class="k">if</span> <span class="n">p_tol</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">p_tol</span>
        <span class="n">a_tol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tols</span><span class="o">.</span><span class="n">ang</span> <span class="k">if</span> <span class="n">a_tol</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">a_tol</span>

        <span class="n">bx</span><span class="p">,</span><span class="n">by</span><span class="p">,</span><span class="n">bh</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">base</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">uavs</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="c1"># Skip damaged UAVs when determining whether the fleet is at base.</span>
            <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">h</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="n">position</span>
            <span class="c1"># Positional check: ensure both x and y are within the tolerance.</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">bx</span><span class="p">)</span><span class="o">&gt;</span><span class="n">p_tol</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">by</span><span class="p">)</span><span class="o">&gt;</span><span class="n">p_tol</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span>
            <span class="c1"># Angular check (disabled by default): use modulo arithmetic to</span>
            <span class="c1"># compute the smallest absolute angular difference between the UAV</span>
            <span class="c1"># heading and the base heading. The formula below maps the raw</span>
            <span class="c1"># difference into $$[-\pi,\pi]$$ and takes the absolute value.</span>
            <span class="c1"># Uncomment to enable heading verification.</span>
<span class="c1">#            if abs((h-bh + pi)%(2*pi)-pi)&gt;a_tol:</span>
<span class="c1">#                return False</span>
        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.World.done" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">done</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#multi_uav_planner.World.done" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Return True if there are no remaining tasks to assign or complete.</p>
<p>The world is considered finished when both the unassigned and assigned
task sets are empty (completed tasks may remain in the completed set).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\world_models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">done</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return True if there are no remaining tasks to assign or complete.</span>

<span class="sd">    The world is considered finished when both the unassigned and assigned</span>
<span class="sd">    task sets are empty (completed tasks may remain in the completed set).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">unassigned</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="multi_uav_planner.World.is_initialized" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_initialized</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#multi_uav_planner.World.is_initialized" class="headerlink" title="Permanent link">&para;</a></h4>


    <div class="doc doc-contents ">

        <p>Sanity-check that the World has been initialized consistently.</p>
<p>Checks performed:
- If $<span class="arithmatex">\(time &gt; 0\)</span>$ we assume initialization has happened (early-exit).
- Both tasks and uavs dictionaries are non-empty.
- Base pose is a 3-tuple.
- Task id sets form a partition of the keys in tasks.
- UAV id sets form a partition of the keys in uavs and are disjoint.
- No overlapping ids across partitions.</p>
<p>Returns True if all checks pass, False otherwise.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\world_models.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_initialized</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sanity-check that the World has been initialized consistently.</span>

<span class="sd">    Checks performed:</span>
<span class="sd">    - If $$time &gt; 0$$ we assume initialization has happened (early-exit).</span>
<span class="sd">    - Both tasks and uavs dictionaries are non-empty.</span>
<span class="sd">    - Base pose is a 3-tuple.</span>
<span class="sd">    - Task id sets form a partition of the keys in tasks.</span>
<span class="sd">    - UAV id sets form a partition of the keys in uavs and are disjoint.</span>
<span class="sd">    - No overlapping ids across partitions.</span>

<span class="sd">    Returns True if all checks pass, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># If time has advanced, we treat the world as already initialized.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">time</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> 
        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1"># tasks and uavs must be present for a meaningful simulation.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">uavs</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="c1"># Base must be a 3-tuple: (x, y, heading)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">task_ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="c1"># Tasks partition check:</span>
    <span class="c1"># Ensure the union of task sets equals the set of declared task ids.</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unassigned</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">completed</span><span class="p">)</span> <span class="o">!=</span> <span class="n">task_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="c1"># Ensure pairwise disjointness of task partitions:</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unassigned</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">assigned</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unassigned</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">completed</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assigned</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">completed</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">uav_ids</span>  <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">uavs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="c1"># UAVs partition check: union should equal declared UAV ids</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idle_uavs</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">transit_uavs</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">busy_uavs</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">damaged_uavs</span><span class="p">)</span> <span class="o">!=</span> <span class="n">uav_ids</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="c1"># Pairwise disjointness checks for UAV partitions:</span>
    <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idle_uavs</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">transit_uavs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idle_uavs</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">busy_uavs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">transit_uavs</span> <span class="o">&amp;</span> <span class="bp">self</span><span class="o">.</span><span class="n">busy_uavs</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">damaged_uavs</span> <span class="o">&amp;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idle_uavs</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">transit_uavs</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">busy_uavs</span><span class="p">)):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="kc">True</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.aggregate_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">aggregate_metrics</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

<a href="#multi_uav_planner.aggregate_metrics" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Convenience aggregator that bundles several key post-run metrics.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">aggregate_metrics</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convenience aggregator that bundles several key post-run metrics.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;world_summary&quot;</span><span class="p">:</span> <span class="n">summarize_world</span><span class="p">(</span><span class="n">world</span><span class="p">),</span>
        <span class="s2">&quot;uav_distances&quot;</span><span class="p">:</span> <span class="n">compute_uav_distances</span><span class="p">(</span><span class="n">runlog</span><span class="p">),</span>
        <span class="s2">&quot;uav_state_durations&quot;</span><span class="p">:</span> <span class="n">compute_uav_state_durations</span><span class="p">(</span><span class="n">runlog</span><span class="p">),</span>
        <span class="s2">&quot;task_latencies&quot;</span><span class="p">:</span> <span class="n">compute_task_latencies</span><span class="p">(</span><span class="n">runlog</span><span class="p">,</span> <span class="n">initial_time</span><span class="o">=</span><span class="mf">0.0</span><span class="p">),</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.assign_clusters_to_uavs_by_proximity" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">assign_clusters_to_uavs_by_proximity</span><span class="p">(</span><span class="n">uavs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">UAV</span><span class="p">],</span> <span class="n">cluster_centers</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span></code>

<a href="#multi_uav_planner.assign_clusters_to_uavs_by_proximity" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Assign each cluster to a distinct UAV by approximate proximity.</p>
<pre><code>This routine forms a cost matrix of squared Euclidean distances between
each UAV position and each cluster center, then calls a greedy assignment
routine to produce a one-to-one mapping from clusters to UAVs.

Requirements and behavior:
- `cluster_centers` must be an array of shape $$(K, 2)$$.
- The function currently expects $$K =      ext{len(uavs)}$$ (one cluster per UAV).
  If the numbers differ a ValueError is raised.
- Costs are squared Euclidean distances (no sqrt) so:
  $$        ext{cost}_{i,j} = (x_{c_j} - x_{u_i})^2 + (y_{c_j} - y_{u_i})^2.$$
- The greedy global assignment function `greedy_global_assign_int` is used to
  select worker-task pairs (here UAV-cluster pairs) without reuse of UAVs
  or clusters. The returned mapping is cluster_index -&gt; uav_id.

Args:
    uavs: list of UAV objects; each `uav.position` is $$(x,y,heading)$$.
    cluster_centers: numpy array of cluster centers shape $$(K,2)$$.

Returns:
    Dictionary mapping `cluster_index -&gt; uav.id`.

Raises:
    ValueError: if `cluster_centers` does not have shape $$(K,2)$$ or if
                $$K
</code></pre>
<p>e       ext{len(uavs)}$$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\clustering.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">assign_clusters_to_uavs_by_proximity</span><span class="p">(</span>
    <span class="n">uavs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">UAV</span><span class="p">],</span>
    <span class="n">cluster_centers</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Assign each cluster to a distinct UAV by approximate proximity.</span>

<span class="sd">    This routine forms a cost matrix of squared Euclidean distances between</span>
<span class="sd">    each UAV position and each cluster center, then calls a greedy assignment</span>
<span class="sd">    routine to produce a one-to-one mapping from clusters to UAVs.</span>

<span class="sd">    Requirements and behavior:</span>
<span class="sd">    - `cluster_centers` must be an array of shape $$(K, 2)$$.</span>
<span class="sd">    - The function currently expects $$K = \text{len(uavs)}$$ (one cluster per UAV).</span>
<span class="sd">      If the numbers differ a ValueError is raised.</span>
<span class="sd">    - Costs are squared Euclidean distances (no sqrt) so:</span>
<span class="sd">      $$\text{cost}_{i,j} = (x_{c_j} - x_{u_i})^2 + (y_{c_j} - y_{u_i})^2.$$</span>
<span class="sd">    - The greedy global assignment function `greedy_global_assign_int` is used to</span>
<span class="sd">      select worker-task pairs (here UAV-cluster pairs) without reuse of UAVs</span>
<span class="sd">      or clusters. The returned mapping is cluster_index -&gt; uav_id.</span>

<span class="sd">    Args:</span>
<span class="sd">        uavs: list of UAV objects; each `uav.position` is $$(x,y,heading)$$.</span>
<span class="sd">        cluster_centers: numpy array of cluster centers shape $$(K,2)$$.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary mapping `cluster_index -&gt; uav.id`.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if `cluster_centers` does not have shape $$(K,2)$$ or if</span>
<span class="sd">                    $$K \ne \text{len(uavs)}$$.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cluster_centers</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">cluster_centers</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">cluster_centers</span><span class="o">.</span><span class="n">ndim</span> <span class="o">!=</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">cluster_centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;cluster_centers must have shape (K, 2)&quot;</span><span class="p">)</span>

    <span class="n">K</span> <span class="o">=</span> <span class="n">cluster_centers</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">K</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">uavs</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Number of clusters (</span><span class="si">{</span><span class="n">K</span><span class="si">}</span><span class="s2">) must equal number of UAVs (</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">uavs</span><span class="p">)</span><span class="si">}</span><span class="s2">) &quot;</span>
            <span class="s2">&quot;for this assignment rule.&quot;</span>
        <span class="p">)</span>

    <span class="c1"># Build cost matrix: squared Euclidean distances between UAV i and cluster j</span>
    <span class="n">costs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">K</span><span class="p">,</span> <span class="n">K</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">uav</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">uavs</span><span class="p">):</span>
        <span class="n">ux</span><span class="p">,</span> <span class="n">uy</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">uav</span><span class="o">.</span><span class="n">position</span>  <span class="c1"># heading ignored for clustering</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">K</span><span class="p">):</span>
            <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span> <span class="o">=</span> <span class="n">cluster_centers</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
            <span class="n">dx</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">-</span> <span class="n">ux</span>
            <span class="n">dy</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">-</span> <span class="n">uy</span>
            <span class="n">costs</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">dx</span> <span class="o">*</span> <span class="n">dx</span> <span class="o">+</span> <span class="n">dy</span> <span class="o">*</span> <span class="n">dy</span>

    <span class="c1"># Greedy integer assignment returns a list `assignment` of length K where</span>
    <span class="c1"># assignment[i] = j indicates UAV i -&gt; cluster j (or -1 if unassigned).</span>
    <span class="n">assignment</span> <span class="o">=</span> <span class="n">greedy_global_assign_int</span><span class="p">(</span><span class="n">costs</span><span class="p">)</span>

    <span class="c1"># Convert assignment (indexed by UAV index) to mapping cluster_index -&gt; uav_id</span>
    <span class="n">cluster_to_uav</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">K</span><span class="p">):</span>
        <span class="n">assigned_cluster</span> <span class="o">=</span> <span class="n">assignment</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">assigned_cluster</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">assigned_cluster</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># Map cluster index -&gt; UAV id</span>
            <span class="n">cluster_to_uav</span><span class="p">[</span><span class="n">assigned_cluster</span><span class="p">]</span> <span class="o">=</span> <span class="n">uavs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>
    <span class="k">return</span> <span class="n">cluster_to_uav</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.cluster_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cluster_tasks</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span></code>

<a href="#multi_uav_planner.cluster_tasks" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>High-level clustering pipeline that assigns unassigned tasks to idle UAVs.</p>
<p>Steps performed:
1. Collect unassigned Task objects from <code>world.unassigned</code>.
2. If there are no unassigned tasks or no idle UAVs, return None.
3. Choose $<span class="arithmatex">\(K = \min(\#     ext{idle\_uavs}, \#     ext{unassigned\_tasks})\)</span>$ clusters.
4. Run <code>cluster_tasks_kmeans</code> to partition tasks into $<span class="arithmatex">\(K\)</span>$ clusters.
5. Map clusters to idle UAVs using <code>assign_clusters_to_uavs_by_proximity</code>.
6. For each assigned cluster <code>k -&gt; uid</code>, update:
    - <code>world.uavs[uid].cluster</code> as the set of task ids in cluster <code>k</code>.
    - <code>world.uavs[uid].cluster_CoG</code> as the cluster center coordinates (floats).
7. Return a dictionary mapping <code>uav_id -&gt; set(task_ids)</code> for the newly assigned clusters.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="typing.Set">Set</span>[<span title="int">int</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A mapping <code>uid -&gt; set(task_ids)</code> when clustering occurs, or None if no</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="int">int</span>, <span title="typing.Set">Set</span>[<span title="int">int</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>clustering was performed (e.g., no idle UAVs or no unassigned tasks).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\clustering.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cluster_tasks</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;High-level clustering pipeline that assigns unassigned tasks to idle UAVs.</span>

<span class="sd">    Steps performed:</span>
<span class="sd">    1. Collect unassigned Task objects from `world.unassigned`.</span>
<span class="sd">    2. If there are no unassigned tasks or no idle UAVs, return None.</span>
<span class="sd">    3. Choose $$K = \min(\#\text{idle\_uavs}, \#\text{unassigned\_tasks})$$ clusters.</span>
<span class="sd">    4. Run `cluster_tasks_kmeans` to partition tasks into $$K$$ clusters.</span>
<span class="sd">    5. Map clusters to idle UAVs using `assign_clusters_to_uavs_by_proximity`.</span>
<span class="sd">    6. For each assigned cluster `k -&gt; uid`, update:</span>
<span class="sd">        - `world.uavs[uid].cluster` as the set of task ids in cluster `k`.</span>
<span class="sd">        - `world.uavs[uid].cluster_CoG` as the cluster center coordinates (floats).</span>
<span class="sd">    7. Return a dictionary mapping `uav_id -&gt; set(task_ids)` for the newly assigned clusters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A mapping `uid -&gt; set(task_ids)` when clustering occurs, or None if no</span>
<span class="sd">        clustering was performed (e.g., no idle UAVs or no unassigned tasks).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Collect Task objects for unassigned task ids</span>
    <span class="n">unassigned_tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span> <span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">unassigned</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">unassigned_tasks</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># Nothing to cluster</span>

    <span class="n">result</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Set</span><span class="p">[</span><span class="nb">int</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Choose number of clusters: at most the number of idle UAVs and the number of tasks</span>
    <span class="n">K</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">unassigned_tasks</span><span class="p">))</span>
    <span class="n">clustering_result</span> <span class="o">=</span> <span class="n">cluster_tasks_kmeans</span><span class="p">(</span>
        <span class="n">unassigned_tasks</span><span class="p">,</span>
        <span class="n">n_clusters</span><span class="o">=</span><span class="n">K</span><span class="p">,</span>
        <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Map clusters to idle UAVs ordered arbitrarily as a list</span>
    <span class="n">idle_uavs_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span> <span class="k">for</span> <span class="n">uid</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="p">]</span>
    <span class="n">cluster_to_uav</span> <span class="o">=</span> <span class="n">assign_clusters_to_uavs_by_proximity</span><span class="p">(</span>
        <span class="n">idle_uavs_list</span><span class="p">,</span>
        <span class="n">clustering_result</span><span class="o">.</span><span class="n">centers</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Update world.uavs for each assigned cluster</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">uid</span> <span class="ow">in</span> <span class="n">cluster_to_uav</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">cluster</span> <span class="o">=</span> <span class="p">{</span><span class="n">t</span><span class="o">.</span><span class="n">id</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">clustering_result</span><span class="o">.</span><span class="n">clusters</span><span class="p">[</span><span class="n">k</span><span class="p">]}</span>
        <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span> <span class="o">=</span> <span class="n">clustering_result</span><span class="o">.</span><span class="n">centers</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
        <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">cluster_CoG</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">cx</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="n">cy</span><span class="p">))</span>
        <span class="n">result</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">cluster</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.cluster_tasks_kmeans" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cluster_tasks_kmeans</span><span class="p">(</span><span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span> <span class="n">n_clusters</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">random_state</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskClusterResult</span></code>

<a href="#multi_uav_planner.cluster_tasks_kmeans" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Cluster tasks into $<span class="arithmatex">\(K\)</span>$ groups using K-means on their 2D positions.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tasks</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Task(id: int, position: Tuple[float, float], state: Literal[0, 1, 2] = 0, heading_enforcement: bool = False, heading: Optional[float] = None, worked_by_uav: Optional[int] = None)

  
      dataclass
   (multi_uav_planner.world_models.Task)" href="#multi_uav_planner.Task">Task</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of Task objects (each must have a 2D <code>position</code>).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>n_clusters</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>desired number of clusters $<span class="arithmatex">\(K\)</span>$ (commonly equal to number of UAVs).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>random_state</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>seed for KMeans initialization for reproducibility.</p>
              </div>
            </td>
            <td>
                  <code>42</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TaskClusterResult(clusters: Dict[int, List[Task]], centers: np.ndarray, task_to_cluster: Dict[int, int])

  
      dataclass
   (multi_uav_planner.clustering.TaskClusterResult)" href="#multi_uav_planner.TaskClusterResult">TaskClusterResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>TaskClusterResult containing:</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TaskClusterResult(clusters: Dict[int, List[Task]], centers: np.ndarray, task_to_cluster: Dict[int, int])

  
      dataclass
   (multi_uav_planner.clustering.TaskClusterResult)" href="#multi_uav_planner.TaskClusterResult">TaskClusterResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>clusters: dict mapping cluster index -&gt; List[Task]</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TaskClusterResult(clusters: Dict[int, List[Task]], centers: np.ndarray, task_to_cluster: Dict[int, int])

  
      dataclass
   (multi_uav_planner.clustering.TaskClusterResult)" href="#multi_uav_planner.TaskClusterResult">TaskClusterResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>centers: $<span class="arithmatex">\(K  imes 2\)</span>$ array with cluster centers</li>
</ul>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><a class="autorefs autorefs-internal" title="TaskClusterResult(clusters: Dict[int, List[Task]], centers: np.ndarray, task_to_cluster: Dict[int, int])

  
      dataclass
   (multi_uav_planner.clustering.TaskClusterResult)" href="#multi_uav_planner.TaskClusterResult">TaskClusterResult</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <ul>
<li>task_to_cluster: mapping from task id -&gt; cluster index</li>
</ul>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if <code>tasks</code> is empty, or if <code>n_clusters</code> is not in $<span class="arithmatex">\([1, N]\)</span>$
        where $<span class="arithmatex">\(N\)</span>$ is the number of tasks.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\clustering.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cluster_tasks_kmeans</span><span class="p">(</span>
    <span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Task</span><span class="p">],</span>
    <span class="n">n_clusters</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">random_state</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">42</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskClusterResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cluster tasks into $$K$$ groups using K-means on their 2D positions.</span>

<span class="sd">    Args:</span>
<span class="sd">        tasks: list of Task objects (each must have a 2D `position`).</span>
<span class="sd">        n_clusters: desired number of clusters $$K$$ (commonly equal to number of UAVs).</span>
<span class="sd">        random_state: seed for KMeans initialization for reproducibility.</span>

<span class="sd">    Returns:</span>
<span class="sd">        TaskClusterResult containing:</span>
<span class="sd">        - clusters: dict mapping cluster index -&gt; List[Task]</span>
<span class="sd">        - centers: $$K \times 2$$ array with cluster centers</span>
<span class="sd">        - task_to_cluster: mapping from task id -&gt; cluster index</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: if `tasks` is empty, or if `n_clusters` is not in $$[1, N]$$</span>
<span class="sd">                    where $$N$$ is the number of tasks.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">tasks</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;tasks list must be non-empty&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n_clusters</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n_clusters must be positive&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">n_clusters</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">tasks</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;n_clusters cannot exceed number of tasks&quot;</span><span class="p">)</span>

    <span class="c1"># Build data matrix for K-means: shape (N, 2)</span>
    <span class="n">X</span> <span class="o">=</span> <span class="n">_extract_task_positions</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

    <span class="n">kmeans</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span>
        <span class="n">n_clusters</span><span class="o">=</span><span class="n">n_clusters</span><span class="p">,</span>
        <span class="n">n_init</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="n">kmeans</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
    <span class="n">centers</span> <span class="o">=</span> <span class="n">kmeans</span><span class="o">.</span><span class="n">cluster_centers_</span>

    <span class="c1"># Organize tasks by cluster label and construct id-&gt;cluster map</span>
    <span class="n">clusters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Task</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="n">i</span><span class="p">:</span> <span class="p">[]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_clusters</span><span class="p">)}</span>
    <span class="n">task_to_cluster</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">task</span><span class="p">,</span> <span class="n">label</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">tasks</span><span class="p">,</span> <span class="n">labels</span><span class="p">):</span>
        <span class="n">label_int</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
        <span class="n">clusters</span><span class="p">[</span><span class="n">label_int</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
        <span class="n">task_to_cluster</span><span class="p">[</span><span class="n">task</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">label_int</span>

    <span class="k">return</span> <span class="n">TaskClusterResult</span><span class="p">(</span>
        <span class="n">clusters</span><span class="o">=</span><span class="n">clusters</span><span class="p">,</span>
        <span class="n">centers</span><span class="o">=</span><span class="n">centers</span><span class="p">,</span>
        <span class="n">task_to_cluster</span><span class="o">=</span><span class="n">task_to_cluster</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.compute_cost" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_cost</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">uav_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">task_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">use_dubins</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span></code>

<a href="#multi_uav_planner.compute_cost" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Construct a cost matrix for the specified UAV ids (rows) and task ids (cols).</p>


<details class="returns-a-tuple" open>
  <summary>Returns a tuple</summary>
  <ul>
<li>$<span class="arithmatex">\(C\)</span>$: list of lists representing the cost matrix (shape $<span class="arithmatex">\(n    imes m\)</span>$).</li>
<li>$<span class="arithmatex">\(uav\_ids\_list\)</span>$: list mapping row index -&gt; uav_id.</li>
<li>$<span class="arithmatex">\(task\_ids\_list\)</span>$: list mapping column index -&gt; task_id.</li>
<li>$<span class="arithmatex">\(uav\_index\)</span>$: dict mapping uav_id -&gt; row index.</li>
<li>$<span class="arithmatex">\(task\_index\)</span>$: dict mapping task_id -&gt; column index.</li>
</ul>
</details>        <p>Cost semantics:
- If $<span class="arithmatex">\(use\_dubins\)</span>$ is True the cost is the length of the Dubins-style path
  returned by <code>plan_path_to_task(world, uid, (x_e, y_e,     heta_e))</code>.
- Otherwise the cost is the Euclidean distance:
  $$        ext{cost} = \sqrt{(x_e - x_s)^2 + (y_e - y_s)^2}.$$</p>
<p>Notes:
- Returned matrix $<span class="arithmatex">\(C\)</span>$ is a list-of-lists (row-major). The function does not
  attempt to normalize or scale costs; callers should be aware of absolute scales.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\assignment.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_cost</span><span class="p">(</span>
    <span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span>
    <span class="n">uav_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
    <span class="n">task_ids</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
    <span class="n">use_dubins</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct a cost matrix for the specified UAV ids (rows) and task ids (cols).</span>

<span class="sd">    Returns a tuple:</span>
<span class="sd">      - $$C$$: list of lists representing the cost matrix (shape $$n \times m$$).</span>
<span class="sd">      - $$uav\_ids\_list$$: list mapping row index -&gt; uav_id.</span>
<span class="sd">      - $$task\_ids\_list$$: list mapping column index -&gt; task_id.</span>
<span class="sd">      - $$uav\_index$$: dict mapping uav_id -&gt; row index.</span>
<span class="sd">      - $$task\_index$$: dict mapping task_id -&gt; column index.</span>

<span class="sd">    Cost semantics:</span>
<span class="sd">    - If $$use\_dubins$$ is True the cost is the length of the Dubins-style path</span>
<span class="sd">      returned by `plan_path_to_task(world, uid, (x_e, y_e, \theta_e))`.</span>
<span class="sd">    - Otherwise the cost is the Euclidean distance:</span>
<span class="sd">      $$\text{cost} = \sqrt{(x_e - x_s)^2 + (y_e - y_s)^2}.$$</span>

<span class="sd">    Notes:</span>
<span class="sd">    - Returned matrix $$C$$ is a list-of-lists (row-major). The function does not</span>
<span class="sd">      attempt to normalize or scale costs; callers should be aware of absolute scales.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uav_ids_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">uav_ids</span><span class="p">)</span>
    <span class="n">task_ids_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">task_ids</span><span class="p">)</span>

    <span class="n">uav_index</span> <span class="o">=</span> <span class="p">{</span><span class="n">uid</span><span class="p">:</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">uid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">uav_ids_list</span><span class="p">)}</span>
    <span class="n">task_index</span> <span class="o">=</span> <span class="p">{</span><span class="n">tid</span><span class="p">:</span> <span class="n">j</span> <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">tid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">task_ids_list</span><span class="p">)}</span>

    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">uav_ids_list</span><span class="p">)</span>
    <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">task_ids_list</span><span class="p">)</span>

    <span class="n">C</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">)]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>

    <span class="k">for</span> <span class="n">uid</span> <span class="ow">in</span> <span class="n">uav_ids_list</span><span class="p">:</span>
        <span class="n">i</span> <span class="o">=</span> <span class="n">uav_index</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">task_ids_list</span><span class="p">:</span>
            <span class="n">j</span> <span class="o">=</span> <span class="n">task_index</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">use_dubins</span><span class="p">:</span>
                <span class="c1"># Use full path planner to compute a feasible/realistic cost (path length)</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span>
                <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">position</span>
                <span class="n">the</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">heading</span> <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">heading_enforcement</span> <span class="k">else</span> <span class="kc">None</span>

                <span class="n">p</span> <span class="o">=</span> <span class="n">plan_path_to_task</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">uid</span><span class="p">,</span> <span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">,</span> <span class="n">the</span><span class="p">))</span>
                <span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">length</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Simple Euclidean distance (fast proxy cost)</span>
                <span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">position</span>
                <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span><span class="o">.</span><span class="n">position</span>
                <span class="n">C</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">xe</span> <span class="o">-</span> <span class="n">xs</span><span class="p">,</span> <span class="n">ye</span> <span class="o">-</span> <span class="n">ys</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">C</span><span class="p">,</span> <span class="n">uav_ids_list</span><span class="p">,</span> <span class="n">task_ids_list</span><span class="p">,</span> <span class="n">uav_index</span><span class="p">,</span> <span class="n">task_index</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.compute_task_latencies" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_task_latencies</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">,</span> <span class="n">initial_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span></code>

<a href="#multi_uav_planner.compute_task_latencies" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compute per-task latency metrics using snapshots.</p>
<p>For each task id, the returned dict contains:
  - time_assigned: first timestamp the task appears in the <code>assigned</code> set.
  - time_completed: first timestamp the task appears in the <code>completed</code> set.
  - wait_to_assign = time_assigned - initial_time
  - wait_to_complete = time_completed - initial_time</p>
<p>Notes:
- If a task never appears in <code>assigned</code> or <code>completed</code>, the corresponding value is NaN.
- If NEW_TASK events occur mid-simulation, consider passing a task-specific
  <code>initial_time</code> when interpreting waits.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_task_latencies</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">,</span> <span class="n">initial_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute per-task latency metrics using snapshots.</span>

<span class="sd">    For each task id, the returned dict contains:</span>
<span class="sd">      - time_assigned: first timestamp the task appears in the `assigned` set.</span>
<span class="sd">      - time_completed: first timestamp the task appears in the `completed` set.</span>
<span class="sd">      - wait_to_assign = time_assigned - initial_time</span>
<span class="sd">      - wait_to_complete = time_completed - initial_time</span>

<span class="sd">    Notes:</span>
<span class="sd">    - If a task never appears in `assigned` or `completed`, the corresponding value is NaN.</span>
<span class="sd">    - If NEW_TASK events occur mid-simulation, consider passing a task-specific</span>
<span class="sd">      `initial_time` when interpreting waits.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lat</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># Build first-appearance times</span>
    <span class="n">t_assigned</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">t_completed</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">time</span>
        <span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">assigned</span><span class="p">:</span>
            <span class="n">t_assigned</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">tid</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">completed</span><span class="p">:</span>
            <span class="n">t_completed</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">tid</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
    <span class="n">tids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">t_assigned</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">t_completed</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">tids</span><span class="p">:</span>
        <span class="n">ta</span> <span class="o">=</span> <span class="n">t_assigned</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
        <span class="n">tc</span> <span class="o">=</span> <span class="n">t_completed</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
        <span class="n">lat</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;time_assigned&quot;</span><span class="p">:</span> <span class="n">ta</span> <span class="k">if</span> <span class="n">ta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">),</span>
            <span class="s2">&quot;time_completed&quot;</span><span class="p">:</span> <span class="n">tc</span> <span class="k">if</span> <span class="n">tc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">),</span>
            <span class="s2">&quot;wait_to_assign&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">ta</span> <span class="o">-</span> <span class="n">initial_time</span><span class="p">)</span> <span class="k">if</span> <span class="n">ta</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">),</span>
            <span class="s2">&quot;wait_to_complete&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">tc</span> <span class="o">-</span> <span class="n">initial_time</span><span class="p">)</span> <span class="k">if</span> <span class="n">tc</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s2">&quot;nan&quot;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="k">return</span> <span class="n">lat</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.compute_time_series_metrics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_time_series_metrics</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span></code>

<a href="#multi_uav_planner.compute_time_series_metrics" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Produce a list of per-snapshot aggregate metrics (time series).</p>
<p>Each entry contains:
- time
- total_actual_distance: sum of all UAV executed distances at that snapshot
- max_actual_distance: maximum per-UAV executed distance
- unfinished_tasks: number of unassigned tasks</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_time_series_metrics</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Produce a list of per-snapshot aggregate metrics (time series).</span>

<span class="sd">    Each entry contains:</span>
<span class="sd">    - time</span>
<span class="sd">    - total_actual_distance: sum of all UAV executed distances at that snapshot</span>
<span class="sd">    - max_actual_distance: maximum per-UAV executed distance</span>
<span class="sd">    - unfinished_tasks: number of unassigned tasks</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">series</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">:</span>
        <span class="n">distances</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">uav_range</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span>
        <span class="n">max_dist</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span> <span class="k">if</span> <span class="n">distances</span> <span class="k">else</span> <span class="mf">0.0</span>
        <span class="n">series</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="n">s</span><span class="o">.</span><span class="n">time</span><span class="p">,</span>
            <span class="s2">&quot;total_actual_distance&quot;</span><span class="p">:</span> <span class="n">total</span><span class="p">,</span>
            <span class="s2">&quot;max_actual_distance&quot;</span><span class="p">:</span> <span class="n">max_dist</span><span class="p">,</span>
            <span class="s2">&quot;unfinished_tasks&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">unassigned</span><span class="p">),</span>
        <span class="p">})</span>
    <span class="k">return</span> <span class="n">series</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.compute_uav_distances" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_uav_distances</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></code>

<a href="#multi_uav_planner.compute_uav_distances" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Extract executed (actual) traveled distance per UAV from the latest snapshot.</p>
<p>The function uses the last snapshot's <code>uav_range</code> which is expected to be
a cumulative traveled distance measured during the simulation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_uav_distances</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract executed (actual) traveled distance per UAV from the latest snapshot.</span>

<span class="sd">    The function uses the last snapshot&#39;s `uav_range` which is expected to be</span>
<span class="sd">    a cumulative traveled distance measured during the simulation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dist</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">dist</span>
    <span class="n">last</span> <span class="o">=</span> <span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">last</span><span class="o">.</span><span class="n">uav_range</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">dist</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dist</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.compute_uav_path_lengths" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_uav_path_lengths</span><span class="p">(</span><span class="n">uav_paths</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></code>

<a href="#multi_uav_planner.compute_uav_path_lengths" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compute planned (pre-execution) path lengths for each UAV from Path objects.</p>
<p>Returns a mapping uav_id -&gt; path.length().</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_uav_path_lengths</span><span class="p">(</span><span class="n">uav_paths</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute planned (pre-execution) path lengths for each UAV from Path objects.</span>

<span class="sd">    Returns a mapping uav_id -&gt; path.length().</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">uav_id</span><span class="p">:</span> <span class="n">path</span><span class="o">.</span><span class="n">length</span><span class="p">()</span> <span class="k">for</span> <span class="n">uav_id</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">uav_paths</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.compute_uav_state_durations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">compute_uav_state_durations</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span></code>

<a href="#multi_uav_planner.compute_uav_state_durations" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Compute per-UAV accumulated durations in each state (0 idle, 1 transit, 2 busy, 3 damaged).</p>
<p>The algorithm:
- Uses consecutive snapshots to obtain time intervals $<span class="arithmatex">\(\Delta t_i\)</span>$.
- For each interval, it accumulates the duration into the state observed
  at the interval start for each UAV.</p>
<p>Returns:
- dict: uav_id -&gt; {state_code -&gt; seconds}</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">compute_uav_state_durations</span><span class="p">(</span><span class="n">runlog</span><span class="p">:</span> <span class="n">RunLog</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Compute per-UAV accumulated durations in each state (0 idle, 1 transit, 2 busy, 3 damaged).</span>

<span class="sd">    The algorithm:</span>
<span class="sd">    - Uses consecutive snapshots to obtain time intervals $$\Delta t_i$$.</span>
<span class="sd">    - For each interval, it accumulates the duration into the state observed</span>
<span class="sd">      at the interval start for each UAV.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - dict: uav_id -&gt; {state_code -&gt; seconds}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">durations</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">durations</span>
    <span class="n">times</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="o">.</span><span class="n">time</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">]</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="p">[</span><span class="n">times</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">times</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">times</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="c1"># initialize durations per UAV</span>
    <span class="k">for</span> <span class="n">uid</span> <span class="ow">in</span> <span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">uav_states</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">durations</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dt</span><span class="p">)):</span>
            <span class="n">st</span> <span class="o">=</span> <span class="n">runlog</span><span class="o">.</span><span class="n">snapshots</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">uav_states</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">durations</span><span class="p">[</span><span class="n">uid</span><span class="p">][</span><span class="n">st</span><span class="p">]</span> <span class="o">+=</span> <span class="n">dt</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">durations</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.cs_segments_shortest" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cs_segments_shortest</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span></code>

<a href="#multi_uav_planner.cs_segments_shortest" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the shortest feasible CS path among the two variants: $<span class="arithmatex">\(LS\)</span>$ and $<span class="arithmatex">\(RS\)</span>$.</p>
<p>The function evaluates both $<span class="arithmatex">\("LS"\)</span>$ and $<span class="arithmatex">\("RS"\)</span>$ via cs_segments_single and
returns the feasible one with minimal total length.</p>
<p>Raises
- ValueError if $<span class="arithmatex">\(radius \le 0\)</span>$.
- ValueError if both $<span class="arithmatex">\(LS\)</span>$ and $<span class="arithmatex">\(RS\)</span>$ are infeasible (i.e., no tangent exists).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\dubins.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cs_segments_shortest</span><span class="p">(</span>
    <span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the shortest feasible CS path among the two variants: $$LS$$ and $$RS$$.</span>

<span class="sd">    The function evaluates both $$&quot;LS&quot;$$ and $$&quot;RS&quot;$$ via cs_segments_single and</span>
<span class="sd">    returns the feasible one with minimal total length.</span>

<span class="sd">    Raises</span>
<span class="sd">    - ValueError if $$radius \le 0$$.</span>
<span class="sd">    - ValueError if both $$LS$$ and $$RS$$ are infeasible (i.e., no tangent exists).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">radius</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;radius must be positive&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">start</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="n">end</span><span class="p">:</span>
        <span class="c1"># degenerate: same position (no path required)</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">([])</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span><span class="n">cs_segments_single</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;LS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS&quot;</span><span class="p">)]</span>
    <span class="n">feasible</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">candidates</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">feasible</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No feasible CS-type Dubins path&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">feasible</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">length</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.cs_segments_single" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cs_segments_single</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">path_type</span><span class="p">:</span> <span class="n">PathType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span></code>

<a href="#multi_uav_planner.cs_segments_single" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Build a CS-type path composed of a single circular arc (C) followed by a
straight line (S). The returned Path has the form [CurveSegment, LineSegment].</p>
<p>The construction places a circle of radius $<span class="arithmatex">\(R\)</span>$ tangent to the start
configuration, then finds the tangency point to a straight line that
reaches the target point.</p>
<p>Parameters
- $<span class="arithmatex">\(start\)</span>$: $<span class="arithmatex">\((x_0, y_0,   heta_0)\)</span>$ start configuration (position and heading, radians).
- $<span class="arithmatex">\(end\)</span>$: $<span class="arithmatex">\((x_f, y_f)\)</span>$ goal position (heading at goal not used for CS).
- $<span class="arithmatex">\(radius\)</span>$: positive turning radius $<span class="arithmatex">\(R &gt; 0\)</span>$.
- $<span class="arithmatex">\(path\_type\)</span>$: either $<span class="arithmatex">\("LS"\)</span>$ (left-turn arc then straight) or $<span class="arithmatex">\("RS"\)</span>$
  (right-turn arc then straight).</p>
<p>Returns
- A Path [arc, line] if a tangent straight-line exists.
- $<span class="arithmatex">\(None\)</span>$ if no tangent exists (i.e., the point is inside the circle of
  tangency).</p>
<p>Geometric summary and key formulas used:
- The center of the start circle is obtained by offsetting the start
  position laterally by $<span class="arithmatex">\(\pm       frac{\pi}{2}\)</span>$ depending on left/right:
  $$        heta_{center} =         heta_0 \pm rac{\pi}{2}.$$
  $<span class="arithmatex">\(x_s = x_0 + R\cos(      heta_{center}),\quad y_s = y_0 + R\sin( heta_{center}).\)</span>$
- Let $<span class="arithmatex">\(d\)</span>$ be the distance from the circle center $<span class="arithmatex">\((x_s,y_s)\)</span>$ to the
  goal point $<span class="arithmatex">\((x_f,y_f)\)</span>$. If $<span class="arithmatex">\(d &lt; R\)</span>$ there is no external tangent,
  so the CS path is infeasible.
- The angle from the circle center to the goal is
  $$        heta_{sf} = \operatorname{atan2}(y_f-y_s,\, x_f-x_s).$$
- For the right triangle between the center, tangency point, and goal:
  $<span class="arithmatex">\(\sin(   heta_{mf}) = rac{R}{d},\quad   heta_{mf} = rcsin\!\left(rac{R}{d}
ight).\)</span>$
- The tangency angle on the circle (angle of the center-&gt;tangent point)
  depends on path type; the code computes $$        heta_M$$ accordingly.
- Arc sweep $<span class="arithmatex">\(\Delta        heta\)</span>$ (stored as $<span class="arithmatex">\(d\_theta\)</span>$) is normalized to the
  appropriate signed interval in the implementation.</p>
<p>Raises
- ValueError if $<span class="arithmatex">\(radius \le 0\)</span>$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\dubins.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cs_segments_single</span><span class="p">(</span>
    <span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">path_type</span><span class="p">:</span> <span class="n">PathType</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build a CS-type path composed of a single circular arc (C) followed by a</span>
<span class="sd">    straight line (S). The returned Path has the form [CurveSegment, LineSegment].</span>

<span class="sd">    The construction places a circle of radius $$R$$ tangent to the start</span>
<span class="sd">    configuration, then finds the tangency point to a straight line that</span>
<span class="sd">    reaches the target point.</span>

<span class="sd">    Parameters</span>
<span class="sd">    - $$start$$: $$(x_0, y_0, \theta_0)$$ start configuration (position and heading, radians).</span>
<span class="sd">    - $$end$$: $$(x_f, y_f)$$ goal position (heading at goal not used for CS).</span>
<span class="sd">    - $$radius$$: positive turning radius $$R &gt; 0$$.</span>
<span class="sd">    - $$path\_type$$: either $$&quot;LS&quot;$$ (left-turn arc then straight) or $$&quot;RS&quot;$$</span>
<span class="sd">      (right-turn arc then straight).</span>

<span class="sd">    Returns</span>
<span class="sd">    - A Path [arc, line] if a tangent straight-line exists.</span>
<span class="sd">    - $$None$$ if no tangent exists (i.e., the point is inside the circle of</span>
<span class="sd">      tangency).</span>

<span class="sd">    Geometric summary and key formulas used:</span>
<span class="sd">    - The center of the start circle is obtained by offsetting the start</span>
<span class="sd">      position laterally by $$\pm \tfrac{\pi}{2}$$ depending on left/right:</span>
<span class="sd">      $$\theta_{center} = \theta_0 \pm \frac{\pi}{2}.$$</span>
<span class="sd">      $$x_s = x_0 + R\cos(\theta_{center}),\quad y_s = y_0 + R\sin(\theta_{center}).$$</span>
<span class="sd">    - Let $$d$$ be the distance from the circle center $$(x_s,y_s)$$ to the</span>
<span class="sd">      goal point $$(x_f,y_f)$$. If $$d &lt; R$$ there is no external tangent,</span>
<span class="sd">      so the CS path is infeasible.</span>
<span class="sd">    - The angle from the circle center to the goal is</span>
<span class="sd">      $$\theta_{sf} = \operatorname{atan2}(y_f-y_s,\, x_f-x_s).$$</span>
<span class="sd">    - For the right triangle between the center, tangency point, and goal:</span>
<span class="sd">      $$\sin(\theta_{mf}) = \frac{R}{d},\quad \theta_{mf} = \arcsin\!\left(\frac{R}{d}\right).$$</span>
<span class="sd">    - The tangency angle on the circle (angle of the center-&gt;tangent point)</span>
<span class="sd">      depends on path type; the code computes $$\theta_M$$ accordingly.</span>
<span class="sd">    - Arc sweep $$\Delta\theta$$ (stored as $$d\_theta$$) is normalized to the</span>
<span class="sd">      appropriate signed interval in the implementation.</span>

<span class="sd">    Raises</span>
<span class="sd">    - ValueError if $$radius \le 0$$.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">radius</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;radius must be positive&quot;</span><span class="p">)</span>

    <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">theta0</span> <span class="o">=</span> <span class="n">start</span>
    <span class="n">xf</span><span class="p">,</span> <span class="n">yf</span> <span class="o">=</span> <span class="n">end</span>

    <span class="c1"># Center angle is start heading rotated left or right by 90 degrees:</span>
    <span class="c1"># $$\theta_{center} = \theta_0 + (\pi/2 \text{ if &#39;LS&#39; else } -\pi/2)$$</span>
    <span class="n">theta_center</span> <span class="o">=</span> <span class="n">theta0</span> <span class="o">+</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="k">if</span> <span class="n">path_type</span> <span class="o">==</span> <span class="s2">&quot;LS&quot;</span> <span class="k">else</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>

    <span class="c1"># Center coordinates of the start-turning circle:</span>
    <span class="c1"># $$x_s = x_0 + R\cos(\theta_{center}), \quad y_s = y_0 + R\sin(\theta_{center})$$</span>
    <span class="n">xs</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta_center</span><span class="p">)</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_center</span><span class="p">)</span>

    <span class="c1"># --- 2. Angle $$\theta_{SF}$$ and Euclidean distance $$d$$ from circle center to target ----</span>
    <span class="n">dx_sf</span> <span class="o">=</span> <span class="n">xf</span> <span class="o">-</span> <span class="n">xs</span>
    <span class="n">dy_sf</span> <span class="o">=</span> <span class="n">yf</span> <span class="o">-</span> <span class="n">ys</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">dx_sf</span><span class="p">,</span> <span class="n">dy_sf</span><span class="p">)</span>

    <span class="c1"># For a CS path the straight segment must be tangent to the circle:</span>
    <span class="c1"># A tangent from the circle center to point F exists only if $$d \ge R$$.</span>
    <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># Angle from the circle center to F:</span>
    <span class="c1"># $$\theta_{sf} = \operatorname{atan2}(dy_{sf}, dx_{sf})$$</span>
    <span class="n">theta_sf</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">dy_sf</span><span class="p">,</span> <span class="n">dx_sf</span><span class="p">)</span>  <span class="c1"># _SF in the paper</span>

    <span class="c1"># --- 3. Angle $$\theta_{mf}$$ between SF and the line from M to F -------</span>
    <span class="c1"># From the right triangle: $$\sin(\theta_{mf}) = R / d$$</span>
    <span class="n">sin_theta_mf</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">radius</span> <span class="o">/</span> <span class="n">d</span><span class="p">))</span>
    <span class="n">theta_mf</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">asin</span><span class="p">(</span><span class="n">sin_theta_mf</span><span class="p">)</span>

    <span class="c1"># --- 4. Angle $$\theta_M$$ of the tangent point M on the start circle ----</span>
    <span class="c1"># For left-turn (LS): rotate $$\theta_{sf}$$ CCW by $$\theta_{mf} - \pi/2$$.</span>
    <span class="c1"># For right-turn (RS): rotate $$\theta_{sf}$$ CW by $$-\theta_{mf} + \pi/2$$.</span>
    <span class="c1"># The code also computes the start-angle on the circle (theta_s) based on start heading.</span>
    <span class="k">if</span> <span class="n">path_type</span> <span class="o">==</span> <span class="s2">&quot;LS&quot;</span><span class="p">:</span>
        <span class="n">theta_M</span> <span class="o">=</span> <span class="n">theta_sf</span> <span class="o">+</span> <span class="n">theta_mf</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">theta_s</span><span class="o">=</span><span class="n">theta0</span><span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="c1"># Normalize sweep to $$[0, 2\pi)$$ for left arc (positive CCW sweep)</span>
        <span class="n">d_theta</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_M</span> <span class="o">-</span> <span class="n">theta_s</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>  <span class="c1"># &quot;RS&quot;</span>
        <span class="n">theta_M</span> <span class="o">=</span> <span class="n">theta_sf</span> <span class="o">-</span> <span class="n">theta_mf</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">theta_s</span><span class="o">=</span><span class="n">theta0</span><span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="c1"># Normalize sweep for right (negative / CW) arcs by shifting to negative range</span>
        <span class="n">d_theta</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_M</span> <span class="o">-</span> <span class="n">theta_s</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>

    <span class="c1"># Tangent point M on the circle:</span>
    <span class="c1"># $$x_M = x_s + R\cos(\theta_M), \quad y_M = y_s + R\sin(\theta_M)$$</span>
    <span class="n">xM</span> <span class="o">=</span> <span class="n">xs</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta_M</span><span class="p">)</span>
    <span class="n">yM</span> <span class="o">=</span> <span class="n">ys</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_M</span><span class="p">)</span>

    <span class="n">arc</span> <span class="o">=</span> <span class="n">CurveSegment</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">theta_s</span><span class="o">=</span><span class="n">theta_s</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">),</span> <span class="n">d_theta</span><span class="o">=</span><span class="n">d_theta</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">LineSegment</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="p">(</span><span class="n">xM</span><span class="p">,</span> <span class="n">yM</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="p">(</span><span class="n">xf</span><span class="p">,</span> <span class="n">yf</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">Path</span><span class="p">([</span><span class="n">arc</span><span class="p">,</span> <span class="n">line</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.csc_segments_shortest" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">csc_segments_shortest</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span></code>

<a href="#multi_uav_planner.csc_segments_shortest" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return the shortest CSC path among the four canonical types:
$$  ext{'LSL'},\;   ext{'LSR'},\;   ext{'RSL'},\;   ext{'RSR'}$$.</p>
<p>The function tries each CSC configuration using csc_segments_single and
returns the feasible path with minimal total length.</p>
<p>Raises
- ValueError if $<span class="arithmatex">\(radius \le 0\)</span>$.
- ValueError if all four CSC variants are infeasible.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\dubins.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">csc_segments_shortest</span><span class="p">(</span>
    <span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">radius</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return the shortest CSC path among the four canonical types:</span>
<span class="sd">    $$\text{&#39;LSL&#39;},\; \text{&#39;LSR&#39;},\; \text{&#39;RSL&#39;},\; \text{&#39;RSR&#39;}$$.</span>

<span class="sd">    The function tries each CSC configuration using csc_segments_single and</span>
<span class="sd">    returns the feasible path with minimal total length.</span>

<span class="sd">    Raises</span>
<span class="sd">    - ValueError if $$radius \le 0$$.</span>
<span class="sd">    - ValueError if all four CSC variants are infeasible.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">radius</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;radius must be positive&quot;</span><span class="p">)</span>

    <span class="n">candidates</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">csc_segments_single</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;LSL&quot;</span><span class="p">,</span> <span class="s2">&quot;LSR&quot;</span><span class="p">,</span> <span class="s2">&quot;RSL&quot;</span><span class="p">,</span> <span class="s2">&quot;RSR&quot;</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">feasible</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">candidates</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">feasible</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No feasible CSC-type Dubins path&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">feasible</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">length</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.csc_segments_single" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">csc_segments_single</span><span class="p">(</span><span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">R</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">path_type</span><span class="p">:</span> <span class="n">CSCPathType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span></code>

<a href="#multi_uav_planner.csc_segments_single" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Build a CSC-type path consisting of two circular arcs separated by a
straight line: [arc1, straight, arc2]. Returns $<span class="arithmatex">\(None\)</span>$ if the requested
tangent geometry is infeasible.</p>
<p>Parameters
- $<span class="arithmatex">\(start\)</span>$: $<span class="arithmatex">\((x_0, y_0,   heta_0)\)</span>$ start configuration (radians).
- $<span class="arithmatex">\(end\)</span>$: $<span class="arithmatex">\((x_f, y_f,     heta_f)\)</span>$ end configuration (radians).
- $<span class="arithmatex">\(R\)</span>$: positive turning radius $<span class="arithmatex">\(R &gt; 0\)</span>$.
- $<span class="arithmatex">\(path\_type\)</span>$: one of $<span class="arithmatex">\("LSL"\)</span>$, $<span class="arithmatex">\("LSR"\)</span>$, $<span class="arithmatex">\("RSL"\)</span>$, $<span class="arithmatex">\("RSR"\)</span>$ describing the
  turning directions of the first and second arcs.</p>
<p>Returns
- Path [arc1, line, arc2] when a valid tangent solution exists.
- $<span class="arithmatex">\(None\)</span>$ when no valid tangent exists (e.g., inner tangent missing).</p>
<p>Notes on geometry and existence conditions:
- Compute start circle center $<span class="arithmatex">\(C_s\)</span>$ and end circle center $<span class="arithmatex">\(C_f\)</span>$ by offsetting
  the start and end positions laterally by $<span class="arithmatex">\(\pm    frac{\pi}{2}\)</span>$ according to
  the left/right choices for the first and second arc:
  $<span class="arithmatex">\(C_s = (x_0 + R\cos(     heta_0 \pm      frac{\pi}{2}),\; y_0 + R\sin(   heta_0 \pm      frac{\pi}{2})),\)</span>$
  $<span class="arithmatex">\(C_f = (x_f + R\cos(     heta_f \pm      frac{\pi}{2}),\; y_f + R\sin(   heta_f \pm      frac{\pi}{2})).\)</span>$
- Let $<span class="arithmatex">\(d\)</span>$ be the distance between centers. For outer tangents (LSL, RSR)
  an external tangent always exists for distinct centers. For inner tangents
  (LSR, RSL) a tangent exists only if $<span class="arithmatex">\(d \ge 2R\)</span>$ because the circles must be
  sufficiently separated.
- The code computes tangent direction angles and arc sweeps $<span class="arithmatex">\(\Delta        heta\)</span>$
  for the first and second arcs. These are normalized to represent the
  appropriate signed rotations (positive for CCW, negative for CW).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\dubins.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">csc_segments_single</span><span class="p">(</span>
    <span class="n">start</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">end</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">R</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">path_type</span><span class="p">:</span> <span class="n">CSCPathType</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build a CSC-type path consisting of two circular arcs separated by a</span>
<span class="sd">    straight line: [arc1, straight, arc2]. Returns $$None$$ if the requested</span>
<span class="sd">    tangent geometry is infeasible.</span>

<span class="sd">    Parameters</span>
<span class="sd">    - $$start$$: $$(x_0, y_0, \theta_0)$$ start configuration (radians).</span>
<span class="sd">    - $$end$$: $$(x_f, y_f, \theta_f)$$ end configuration (radians).</span>
<span class="sd">    - $$R$$: positive turning radius $$R &gt; 0$$.</span>
<span class="sd">    - $$path\_type$$: one of $$&quot;LSL&quot;$$, $$&quot;LSR&quot;$$, $$&quot;RSL&quot;$$, $$&quot;RSR&quot;$$ describing the</span>
<span class="sd">      turning directions of the first and second arcs.</span>

<span class="sd">    Returns</span>
<span class="sd">    - Path [arc1, line, arc2] when a valid tangent solution exists.</span>
<span class="sd">    - $$None$$ when no valid tangent exists (e.g., inner tangent missing).</span>

<span class="sd">    Notes on geometry and existence conditions:</span>
<span class="sd">    - Compute start circle center $$C_s$$ and end circle center $$C_f$$ by offsetting</span>
<span class="sd">      the start and end positions laterally by $$\pm \tfrac{\pi}{2}$$ according to</span>
<span class="sd">      the left/right choices for the first and second arc:</span>
<span class="sd">      $$C_s = (x_0 + R\cos(\theta_0 \pm \tfrac{\pi}{2}),\; y_0 + R\sin(\theta_0 \pm \tfrac{\pi}{2})),$$</span>
<span class="sd">      $$C_f = (x_f + R\cos(\theta_f \pm \tfrac{\pi}{2}),\; y_f + R\sin(\theta_f \pm \tfrac{\pi}{2})).$$</span>
<span class="sd">    - Let $$d$$ be the distance between centers. For outer tangents (LSL, RSR)</span>
<span class="sd">      an external tangent always exists for distinct centers. For inner tangents</span>
<span class="sd">      (LSR, RSL) a tangent exists only if $$d \ge 2R$$ because the circles must be</span>
<span class="sd">      sufficiently separated.</span>
<span class="sd">    - The code computes tangent direction angles and arc sweeps $$\Delta\theta$$</span>
<span class="sd">      for the first and second arcs. These are normalized to represent the</span>
<span class="sd">      appropriate signed rotations (positive for CCW, negative for CW).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Unpack start and end configurations</span>
    <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">th0</span> <span class="o">=</span> <span class="n">start</span>
    <span class="n">xf</span><span class="p">,</span> <span class="n">yf</span><span class="p">,</span> <span class="n">thf</span> <span class="o">=</span> <span class="n">end</span>

    <span class="c1"># Compute center of start circle:</span>
    <span class="c1"># $$\theta_{rad\_s} = \theta_0 \pm \frac{\pi}{2}$$ depending on first turn being L or R</span>
    <span class="n">th_rad_s</span> <span class="o">=</span> <span class="n">th0</span> <span class="o">+</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="k">if</span> <span class="n">path_type</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;L&quot;</span> <span class="k">else</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
    <span class="n">xs</span> <span class="o">=</span> <span class="n">x0</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">th_rad_s</span><span class="p">)</span>
    <span class="n">ys</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">th_rad_s</span><span class="p">)</span>

    <span class="c1"># Compute center of end circle similarly:</span>
    <span class="n">th_rad_f</span> <span class="o">=</span> <span class="n">thf</span> <span class="o">+</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="k">if</span> <span class="n">path_type</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;L&quot;</span> <span class="k">else</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span>
    <span class="n">xf_c</span> <span class="o">=</span> <span class="n">xf</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">th_rad_f</span><span class="p">)</span>
    <span class="n">yf_c</span> <span class="o">=</span> <span class="n">yf</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">th_rad_f</span><span class="p">)</span>


    <span class="c1"># Vector between circle centers and its distance:</span>
    <span class="c1"># $$d = \|C_f - C_s\|$$ and base angle $$\theta_{sf} = \operatorname{atan2}(dy, dx)$$</span>
    <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">xf_c</span> <span class="o">-</span> <span class="n">xs</span><span class="p">,</span> <span class="n">yf_c</span> <span class="o">-</span> <span class="n">ys</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">)</span>
    <span class="n">th_sf</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">dy</span><span class="p">,</span> <span class="n">dx</span><span class="p">)</span>

    <span class="c1"># inner = True for LSR or RSL (these use inner tangents)</span>
    <span class="n">inner</span> <span class="o">=</span> <span class="n">path_type</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;LSR&quot;</span><span class="p">,</span> <span class="s2">&quot;RSL&quot;</span><span class="p">}</span>

    <span class="c1"># Angle correction used for inner tangents:</span>
    <span class="n">theta_mn</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">if</span> <span class="n">inner</span><span class="p">:</span> 
        <span class="c1"># For inner tangents we need $$d \ge 2R$$ because the tangent joins the</span>
        <span class="c1"># near sides of the two circles. Compute:</span>
        <span class="c1"># $$\sin(\theta_{mn}) = \frac{2R}{d}$$ (derived from geometry)</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">R</span> <span class="o">/</span> <span class="n">d</span>
        <span class="k">if</span> <span class="n">ratio</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>     <span class="c1"># no inner tangent exists if centers are too close</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">theta_mn</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">asin</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">ratio</span><span class="p">)))</span>

    <span class="c1"># Compute tangent angles and arc transitions depending on path_type.</span>
    <span class="c1"># The code establishes angles of the tangent points on each circle (th_M, th_N)</span>
    <span class="c1"># and the corresponding arc start angles and sweeps (delta1, delta2).</span>
    <span class="k">if</span> <span class="n">path_type</span> <span class="o">==</span> <span class="s2">&quot;LSL&quot;</span><span class="p">:</span>
        <span class="n">th_M</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">th_N</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">theta_s1</span> <span class="o">=</span> <span class="n">th0</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># Normalize to $$[0,2\pi)$$ for left-turned arcs (CCW positive)</span>
        <span class="n">delta1</span> <span class="o">=</span> <span class="p">(</span><span class="n">th_M</span> <span class="o">-</span> <span class="n">theta_s1</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">theta_f2</span> <span class="o">=</span> <span class="n">thf</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">delta2</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_f2</span> <span class="o">-</span> <span class="n">th_N</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span> 
    <span class="k">elif</span> <span class="n">path_type</span> <span class="o">==</span> <span class="s2">&quot;RSR&quot;</span><span class="p">:</span>
        <span class="n">th_M</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">th_N</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">theta_s1</span> <span class="o">=</span> <span class="n">th0</span><span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="c1"># For right turns we represent CW rotation as a negative sweep:</span>
        <span class="n">delta1</span> <span class="o">=</span> <span class="p">(</span><span class="n">th_M</span> <span class="o">-</span> <span class="n">theta_s1</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">theta_f2</span><span class="o">=</span><span class="n">thf</span><span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">delta2</span> <span class="o">=</span> <span class="p">(</span><span class="n">theta_f2</span> <span class="o">-</span> <span class="n">th_N</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">path_type</span> <span class="o">==</span> <span class="s2">&quot;LSR&quot;</span><span class="p">:</span>
        <span class="c1"># inner tangent: connect left-turn start circle to right-turn end circle</span>
        <span class="n">th_M</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">+</span> <span class="n">theta_mn</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">th_N</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">+</span> <span class="n">theta_mn</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">theta_s1</span> <span class="o">=</span> <span class="n">th0</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">delta1</span><span class="o">=</span> <span class="p">(</span><span class="n">th_M</span><span class="o">-</span><span class="n">theta_s1</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">theta_f2</span><span class="o">=</span> <span class="n">thf</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="c1"># second arc is right-turn (CW), normalize to negative sweep</span>
        <span class="n">delta2</span><span class="o">=</span><span class="p">(</span><span class="n">theta_f2</span> <span class="o">-</span> <span class="n">th_N</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span> <span class="c1"># &quot;RSL&quot;</span>
        <span class="c1"># inner tangent: connect right-turn start circle to left-turn end circle</span>
        <span class="n">th_M</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">-</span> <span class="n">theta_mn</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">th_N</span> <span class="o">=</span> <span class="n">th_sf</span> <span class="o">-</span> <span class="n">theta_mn</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">theta_s1</span> <span class="o">=</span> <span class="n">th0</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="c1"># First arc is a right turn (CW); represent CW as negative sweep</span>
        <span class="n">delta1</span><span class="o">=</span> <span class="p">(</span><span class="n">th_M</span><span class="o">-</span><span class="n">theta_s1</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">theta_f2</span><span class="o">=</span> <span class="n">thf</span> <span class="o">-</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span>
        <span class="c1"># Second arc is left turn (CCW); normalize to positive sweep</span>
        <span class="n">delta2</span><span class="o">=</span><span class="p">(</span><span class="n">theta_f2</span> <span class="o">-</span> <span class="n">th_N</span><span class="p">)</span> <span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>

    <span class="c1"># Compute the tangent points on each circle using their angles:</span>
    <span class="c1"># $$M = C_s + R[\cos(\theta_M), \sin(\theta_M)]$$</span>
    <span class="c1"># $$N = C_f + R[\cos(\theta_N), \sin(\theta_N)]$$</span>
    <span class="n">xM</span> <span class="o">=</span> <span class="n">xs</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">th_M</span><span class="p">)</span>
    <span class="n">yM</span> <span class="o">=</span> <span class="n">ys</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">th_M</span><span class="p">)</span>
    <span class="n">xN</span> <span class="o">=</span> <span class="n">xf_c</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">th_N</span><span class="p">)</span>
    <span class="n">yN</span> <span class="o">=</span> <span class="n">yf_c</span> <span class="o">+</span> <span class="n">R</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">th_N</span><span class="p">)</span>

    <span class="c1"># Construct the path segments:</span>
    <span class="c1"># - arc1: CurveSegment for the initial turning arc around C_s</span>
    <span class="c1"># - line: LineSegment connecting tangent points M-&gt;N</span>
    <span class="c1"># - arc2: CurveSegment for the final turning arc around C_f</span>
    <span class="n">arc1</span> <span class="o">=</span> <span class="n">CurveSegment</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">xs</span><span class="p">,</span> <span class="n">ys</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="n">R</span><span class="p">,</span> <span class="n">theta_s</span><span class="o">=</span><span class="n">theta_s1</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">),</span> <span class="n">d_theta</span><span class="o">=</span><span class="n">delta1</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">LineSegment</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="p">(</span><span class="n">xM</span><span class="p">,</span> <span class="n">yM</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="p">(</span><span class="n">xN</span><span class="p">,</span> <span class="n">yN</span><span class="p">))</span>
    <span class="n">arc2</span> <span class="o">=</span> <span class="n">CurveSegment</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">xf_c</span><span class="p">,</span> <span class="n">yf_c</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="n">R</span><span class="p">,</span> <span class="n">theta_s</span><span class="o">=</span><span class="n">th_N</span><span class="o">%</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">),</span> <span class="n">d_theta</span><span class="o">=</span><span class="n">delta2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">([</span><span class="n">arc1</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">arc2</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.generate_scenario" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generate_scenario</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">ScenarioConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Scenario</span></code>

<a href="#multi_uav_planner.generate_scenario" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Generate a random Scenario from the provided config.</p>
<p>The procedure is deterministic when $<span class="arithmatex">\(config.seed\)</span>$ is fixed via
$<span class="arithmatex">\(random.seed(config.seed)\)</span>$, making it suitable for repeatable tests.</p>
<p>Returns:
- Scenario: container with fields populated (tasks, uavs, base, events, alg_type).</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\scenario_generation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_scenario</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">ScenarioConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Scenario</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a random Scenario from the provided config.</span>

<span class="sd">    The procedure is deterministic when $$config.seed$$ is fixed via</span>
<span class="sd">    $$random.seed(config.seed)$$, making it suitable for repeatable tests.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - Scenario: container with fields populated (tasks, uavs, base, events, alg_type).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">seed</span><span class="p">)</span>

    <span class="n">base</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">base</span>

    <span class="n">tasks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Task</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">_generate_random_task</span><span class="p">(</span><span class="n">task_id</span><span class="o">=</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">n_tasks</span><span class="p">)</span>
    <span class="p">]</span>
    <span class="n">uavs</span> <span class="o">=</span> <span class="n">_generate_uavs</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>

    <span class="n">events</span> <span class="o">=</span> <span class="n">_generate_events</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>

    <span class="n">alg_type</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">alg_type</span>

    <span class="k">return</span> <span class="n">Scenario</span><span class="p">(</span>
        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
        <span class="n">tasks</span><span class="o">=</span><span class="n">tasks</span><span class="p">,</span>
        <span class="n">uavs</span><span class="o">=</span><span class="n">uavs</span><span class="p">,</span>
        <span class="n">base</span><span class="o">=</span><span class="n">base</span><span class="p">,</span>
        <span class="n">events</span><span class="o">=</span><span class="n">events</span><span class="p">,</span>
        <span class="n">alg_type</span><span class="o">=</span><span class="n">alg_type</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.initialize_world" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">initialize_world</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#multi_uav_planner.initialize_world" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Initialize a World instance using the data produced by generate_scenario().</p>
<p>Side effects:
- Overwrites world.tasks and world.uavs with dicts keyed by id.
- Sets world.base and world.time (time reset to $<span class="arithmatex">\(0.0\)</span>$).
- Installs the scenario event list on world.events and resets the events cursor.
- Clears and repopulates the task and UAV partition sets (unassigned/assigned/completed and idle/transit/busy/damaged).
- Propagates tolerances from the scenario config into world.tols.</p>
<p>Consistency checks and validation:
- Validates $<span class="arithmatex">\(UAV.assigned\_path\)</span>$ types (must be a Path or None).
- Raises ValueError for unknown task or UAV states.
- At the end the function asserts that the declared partitions exactly cover
  the respective id sets for tasks and UAVs.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\scenario_generation.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_world</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">scenario</span><span class="p">:</span> <span class="n">Scenario</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize a World instance using the data produced by generate_scenario().</span>

<span class="sd">    Side effects:</span>
<span class="sd">    - Overwrites world.tasks and world.uavs with dicts keyed by id.</span>
<span class="sd">    - Sets world.base and world.time (time reset to $$0.0$$).</span>
<span class="sd">    - Installs the scenario event list on world.events and resets the events cursor.</span>
<span class="sd">    - Clears and repopulates the task and UAV partition sets (unassigned/assigned/completed and idle/transit/busy/damaged).</span>
<span class="sd">    - Propagates tolerances from the scenario config into world.tols.</span>

<span class="sd">    Consistency checks and validation:</span>
<span class="sd">    - Validates $$UAV.assigned\_path$$ types (must be a Path or None).</span>
<span class="sd">    - Raises ValueError for unknown task or UAV states.</span>
<span class="sd">    - At the end the function asserts that the declared partitions exactly cover</span>
<span class="sd">      the respective id sets for tasks and UAVs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Replace dictionaries and simple fields</span>
    <span class="n">world</span><span class="o">.</span><span class="n">tasks</span> <span class="o">=</span> <span class="p">{</span><span class="n">t</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">scenario</span><span class="o">.</span><span class="n">tasks</span><span class="p">}</span>
    <span class="n">world</span><span class="o">.</span><span class="n">uavs</span>  <span class="o">=</span> <span class="p">{</span><span class="n">u</span><span class="o">.</span><span class="n">id</span><span class="p">:</span> <span class="n">u</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">scenario</span><span class="o">.</span><span class="n">uavs</span><span class="p">}</span>
    <span class="n">world</span><span class="o">.</span><span class="n">base</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">base</span>
    <span class="n">world</span><span class="o">.</span><span class="n">time</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="c1"># Install scheduled events</span>
    <span class="n">world</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">events</span>
    <span class="n">world</span><span class="o">.</span><span class="n">events_cursor</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Clear partitions before repopulating</span>
    <span class="n">world</span><span class="o">.</span><span class="n">unassigned</span><span class="o">.</span><span class="n">clear</span><span class="p">();</span> <span class="n">world</span><span class="o">.</span><span class="n">assigned</span><span class="o">.</span><span class="n">clear</span><span class="p">();</span> <span class="n">world</span><span class="o">.</span><span class="n">completed</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="o">.</span><span class="n">clear</span><span class="p">();</span> <span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span><span class="o">.</span><span class="n">clear</span><span class="p">();</span> <span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span><span class="o">.</span><span class="n">clear</span><span class="p">();</span> <span class="n">world</span><span class="o">.</span><span class="n">damaged_uavs</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="n">world</span><span class="o">.</span><span class="n">tols</span> <span class="o">=</span> <span class="n">scenario</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">tolerances</span>

    <span class="c1"># Populate task partitions from task.state</span>
    <span class="k">for</span> <span class="n">tid</span><span class="p">,</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">unassigned</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">assigned</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">t</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">completed</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task </span><span class="si">{</span><span class="n">tid</span><span class="si">}</span><span class="s2"> has unknown state </span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Populate UAV partitions from u.state and validate assigned_path type</span>
    <span class="k">for</span> <span class="n">uid</span><span class="p">,</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">assigned_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">assigned_path</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;UAV.assigned_path must be a Path or None&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">u</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">u</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">u</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">damaged_uavs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span> <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;UAV </span><span class="si">{</span><span class="n">uid</span><span class="si">}</span><span class="s2"> has unknown status </span><span class="si">{</span><span class="n">u</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Final consistency assertions: partitions must exactly cover declared ids</span>
    <span class="k">assert</span> <span class="n">world</span><span class="o">.</span><span class="n">unassigned</span> <span class="o">|</span> <span class="n">world</span><span class="o">.</span><span class="n">assigned</span> <span class="o">|</span> <span class="n">world</span><span class="o">.</span><span class="n">completed</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">assert</span> <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span> <span class="o">|</span> <span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span> <span class="o">|</span> <span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span> <span class="o">|</span> <span class="n">world</span><span class="o">.</span><span class="n">damaged_uavs</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.instrument_assignment" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">instrument_assignment</span><span class="p">(</span><span class="n">assignment_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">TimeRegistry</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;assignment&#39;</span><span class="p">)</span></code>

<a href="#multi_uav_planner.instrument_assignment" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a wrapper around an assignment function that records wall and CPU time.</p>
<p>Parameters:
- assignment_fn: callable performing assignment (e.g., <code>assignment</code>).
- registry: TimeRegistry instance used to accumulate timings.
- label: label under which to record the timing (default: "assignment").</p>
<p>The returned function has the same signature as <code>assignment_fn</code> and, in
addition to forwarding its return value, will call <code>registry.add(label, wall, cpu)</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">instrument_assignment</span><span class="p">(</span><span class="n">assignment_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">TimeRegistry</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;assignment&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a wrapper around an assignment function that records wall and CPU time.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - assignment_fn: callable performing assignment (e.g., `assignment`).</span>
<span class="sd">    - registry: TimeRegistry instance used to accumulate timings.</span>
<span class="sd">    - label: label under which to record the timing (default: &quot;assignment&quot;).</span>

<span class="sd">    The returned function has the same signature as `assignment_fn` and, in</span>
<span class="sd">    addition to forwarding its return value, will call `registry.add(label, wall, cpu)`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">();</span> <span class="n">start_c</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">process_time</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">assignment_fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">process_time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">return</span> <span class="n">wrapped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.instrument_cluster" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">instrument_cluster</span><span class="p">(</span><span class="n">cluster_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">TimeRegistry</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;cluster_tasks&#39;</span><span class="p">)</span></code>

<a href="#multi_uav_planner.instrument_cluster" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wrap the clustering routine to measure its runtime.</p>
<p>Parameters:
- cluster_fn: callable performing clustering (e.g., <code>cluster_tasks</code>).
- registry: TimeRegistry instance used to accumulate timings.
- label: label for the timing records (default: "cluster_tasks").</p>
<p>Returned callable forwards all arguments to <code>cluster_fn</code> and records wall and CPU time.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">instrument_cluster</span><span class="p">(</span><span class="n">cluster_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">TimeRegistry</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cluster_tasks&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrap the clustering routine to measure its runtime.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - cluster_fn: callable performing clustering (e.g., `cluster_tasks`).</span>
<span class="sd">    - registry: TimeRegistry instance used to accumulate timings.</span>
<span class="sd">    - label: label for the timing records (default: &quot;cluster_tasks&quot;).</span>

<span class="sd">    Returned callable forwards all arguments to `cluster_fn` and records wall and CPU time.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">();</span> <span class="n">start_c</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">process_time</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">cluster_fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">process_time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">return</span> <span class="n">wrapped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.instrument_planner" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">instrument_planner</span><span class="p">(</span><span class="n">plan_to_task_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">TimeRegistry</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;plan_path_to_task&#39;</span><span class="p">)</span></code>

<a href="#multi_uav_planner.instrument_planner" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Wrap a path planning function to collect runtime per invocation.</p>
<p>Parameters:
- plan_to_task_fn: callable (e.g., <code>plan_path_to_task</code>) to be wrapped.
- registry: TimeRegistry instance to record timings.
- label: label to record timings under (default: "plan_path_to_task").</p>


<details class="usage" open>
  <summary>Usage</summary>
  <p>planner = instrument_planner(plan_path_to_task, registry)
path = planner(world, uav_id, target_pose)</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">instrument_planner</span><span class="p">(</span><span class="n">plan_to_task_fn</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">TimeRegistry</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;plan_path_to_task&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrap a path planning function to collect runtime per invocation.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - plan_to_task_fn: callable (e.g., `plan_path_to_task`) to be wrapped.</span>
<span class="sd">    - registry: TimeRegistry instance to record timings.</span>
<span class="sd">    - label: label to record timings under (default: &quot;plan_path_to_task&quot;).</span>

<span class="sd">    Usage:</span>
<span class="sd">        planner = instrument_planner(plan_path_to_task, registry)</span>
<span class="sd">        path = planner(world, uav_id, target_pose)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">wrapped</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">();</span> <span class="n">start_c</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">process_time</span><span class="p">()</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">plan_to_task_fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">registry</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">process_time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_c</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="k">return</span> <span class="n">wrapped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.move_in_transit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">move_in_transit</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#multi_uav_planner.move_in_transit" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Advance UAVs currently in the <code>world.transit_uavs</code> set by time step $<span class="arithmatex">\(dt\)</span>$.</p>
<p>Behavior:
- For each UAV id <code>j</code> in <code>world.transit_uavs</code>:
    - If the UAV has no assigned path (<code>uav.assigned_path</code> is None) or
      the path has no remaining segments, the UAV is considered to have
      reached the assigned position. The UAV is moved from the transit
      partition to the busy partition and a mission path for the assigned
      task is generated via <code>plan_mission_path</code>.
    - Otherwise, call <code>pose_update(uav, dt, world.tols.ang)</code> to advance
      the UAV along its current active segment.
      - If <code>pose_update</code> returns True it means the active segment was
        completed during this update; in that case the completed segment
        is removed from the path (<code>path.segments.pop(0)</code>).
- The function returns True if any UAV had its pose advanced during this call.</p>
<p>Notes:
- The function iterates over a snapshot <code>list(world.transit_uavs)</code> to
  permit safely removing/adding ids to the partition sets inside the loop.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\stepping_fcts.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">move_in_transit</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Advance UAVs currently in the ``world.transit_uavs`` set by time step $$dt$$.</span>

<span class="sd">    Behavior:</span>
<span class="sd">    - For each UAV id ``j`` in ``world.transit_uavs``:</span>
<span class="sd">        - If the UAV has no assigned path (``uav.assigned_path`` is None) or</span>
<span class="sd">          the path has no remaining segments, the UAV is considered to have</span>
<span class="sd">          reached the assigned position. The UAV is moved from the transit</span>
<span class="sd">          partition to the busy partition and a mission path for the assigned</span>
<span class="sd">          task is generated via ``plan_mission_path``.</span>
<span class="sd">        - Otherwise, call ``pose_update(uav, dt, world.tols.ang)`` to advance</span>
<span class="sd">          the UAV along its current active segment.</span>
<span class="sd">          - If ``pose_update`` returns True it means the active segment was</span>
<span class="sd">            completed during this update; in that case the completed segment</span>
<span class="sd">            is removed from the path (``path.segments.pop(0)``).</span>
<span class="sd">    - The function returns True if any UAV had its pose advanced during this call.</span>

<span class="sd">    Notes:</span>
<span class="sd">    - The function iterates over a snapshot ``list(world.transit_uavs)`` to</span>
<span class="sd">      permit safely removing/adding ids to the partition sets inside the loop.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">moved</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span><span class="p">):</span>
        <span class="n">uav</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">uav</span><span class="o">.</span><span class="n">assigned_path</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="c1"># Path empty: arrive =&gt; switch to busy and create mission path</span>
            <span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
            <span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
            <span class="n">uav</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="mi">2</span>
            <span class="n">tid</span> <span class="o">=</span> <span class="n">uav</span><span class="o">.</span><span class="n">current_task</span>
            <span class="k">if</span> <span class="n">tid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Generate intratask coverage path (may be empty for point tasks)</span>
                <span class="n">uav</span><span class="o">.</span><span class="n">assigned_path</span> <span class="o">=</span> <span class="n">plan_mission_path</span><span class="p">(</span><span class="n">uav</span><span class="p">,</span> <span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">[</span><span class="n">tid</span><span class="p">])</span>
            <span class="k">continue</span>

        <span class="c1"># Advance along the current segment</span>
        <span class="n">flag</span> <span class="o">=</span> <span class="n">pose_update</span><span class="p">(</span><span class="n">uav</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">world</span><span class="o">.</span><span class="n">tols</span><span class="o">.</span><span class="n">ang</span><span class="p">)</span>
        <span class="n">moved</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
            <span class="c1"># The active segment completed: remove it from the path</span>
            <span class="n">path</span><span class="o">.</span><span class="n">segments</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">moved</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.perform_task" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">perform_task</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

<a href="#multi_uav_planner.perform_task" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Advance UAVs that are executing a task (<code>world.busy_uavs</code>) by $<span class="arithmatex">\(dt\)</span>$.</p>
<p>Behavior:
- For each UAV id <code>j</code> in <code>world.busy_uavs</code>:
    - If the UAV has an assigned mission path with remaining segments,
      call <code>pose_update</code> to advance along the active segment. If the
      active segment completes, pop it from the path.
    - If the UAV has no mission path or no remaining segments after the
      advance, the task is considered finished:
        - Move the UAV from <code>busy</code> to <code>idle</code> partition and clear its
          assigned path and <code>current_task</code>.
        - Mark the task as completed in the world partition sets:
          move task id from <code>assigned</code> to <code>completed</code> and set
          <code>world.tasks[tid].state = 2</code>.
        - If the task belonged to the UAV's cluster, remove it; recompute
          cluster CoG if tasks remain, else clear the CoG.
- Returns True if any UAV had its pose advanced.</p>
<p>Notes:
- All updates mutate the World and UAVs in-place.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\stepping_fcts.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">perform_task</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Advance UAVs that are executing a task (``world.busy_uavs``) by $$dt$$.</span>

<span class="sd">    Behavior:</span>
<span class="sd">    - For each UAV id ``j`` in ``world.busy_uavs``:</span>
<span class="sd">        - If the UAV has an assigned mission path with remaining segments,</span>
<span class="sd">          call ``pose_update`` to advance along the active segment. If the</span>
<span class="sd">          active segment completes, pop it from the path.</span>
<span class="sd">        - If the UAV has no mission path or no remaining segments after the</span>
<span class="sd">          advance, the task is considered finished:</span>
<span class="sd">            - Move the UAV from ``busy`` to ``idle`` partition and clear its</span>
<span class="sd">              assigned path and ``current_task``.</span>
<span class="sd">            - Mark the task as completed in the world partition sets:</span>
<span class="sd">              move task id from ``assigned`` to ``completed`` and set</span>
<span class="sd">              ``world.tasks[tid].state = 2``.</span>
<span class="sd">            - If the task belonged to the UAV&#39;s cluster, remove it; recompute</span>
<span class="sd">              cluster CoG if tasks remain, else clear the CoG.</span>
<span class="sd">    - Returns True if any UAV had its pose advanced.</span>

<span class="sd">    Notes:</span>
<span class="sd">    - All updates mutate the World and UAVs in-place.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">moved</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span><span class="p">):</span>
        <span class="n">uav</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">uav</span><span class="o">.</span><span class="n">assigned_path</span>

        <span class="k">if</span> <span class="n">path</span> <span class="ow">and</span> <span class="n">path</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="n">flag</span> <span class="o">=</span> <span class="n">pose_update</span><span class="p">(</span><span class="n">uav</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">world</span><span class="o">.</span><span class="n">tols</span><span class="o">.</span><span class="n">ang</span><span class="p">)</span>
            <span class="n">moved</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">flag</span><span class="p">:</span>
                <span class="n">path</span><span class="o">.</span><span class="n">segments</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">segments</span><span class="p">:</span>
            <span class="c1"># Task finished: update partitions and bookkeeping</span>
            <span class="n">tid</span> <span class="o">=</span> <span class="n">uav</span><span class="o">.</span><span class="n">current_task</span>
            <span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
            <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
            <span class="n">uav</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">uav</span><span class="o">.</span><span class="n">assigned_path</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">tid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Mark task completed</span>
                <span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">[</span><span class="n">tid</span><span class="p">]</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="mi">2</span>
                <span class="n">world</span><span class="o">.</span><span class="n">assigned</span><span class="o">.</span><span class="n">discard</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
                <span class="n">world</span><span class="o">.</span><span class="n">completed</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
                <span class="n">uav</span><span class="o">.</span><span class="n">current_task</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="c1"># Maintain cluster membership and recompute CoG if needed</span>
                <span class="k">if</span> <span class="n">tid</span> <span class="ow">in</span> <span class="n">uav</span><span class="o">.</span><span class="n">cluster</span><span class="p">:</span>
                    <span class="n">uav</span><span class="o">.</span><span class="n">cluster</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tid</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">uav</span><span class="o">.</span><span class="n">cluster</span><span class="p">:</span>
                        <span class="n">xs</span> <span class="o">=</span> <span class="p">[</span><span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">uav</span><span class="o">.</span><span class="n">cluster</span><span class="p">]</span>
                        <span class="n">ys</span> <span class="o">=</span> <span class="p">[</span><span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">[</span><span class="n">t</span><span class="p">]</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">uav</span><span class="o">.</span><span class="n">cluster</span><span class="p">]</span>
                        <span class="n">uav</span><span class="o">.</span><span class="n">cluster_CoG</span> <span class="o">=</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">xs</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">xs</span><span class="p">),</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ys</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">ys</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">uav</span><span class="o">.</span><span class="n">cluster_CoG</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">return</span> <span class="n">moved</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.plan_mission_path" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plan_mission_path</span><span class="p">(</span><span class="n">uav</span><span class="p">:</span> <span class="n">UAV</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span></code>

<a href="#multi_uav_planner.plan_mission_path" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Build the coverage path required to perform the given Task. The returned
Path describes how the UAV should traverse the geometry inside the task.</p>
<p>Summary per task type:
- PointTask:
    - No coverage path inside the task: returns an empty Path <code>[]</code>.
- LineTask:
    - Returns a single straight LineSegment of length <code>task.length</code> starting
      at the task position and oriented along the mission heading.
- CircleTask:
    - Returns a single full-circle CurveSegment centered so the circle
      passes through the task position and starts with the specified heading.
      The sweep is $<span class="arithmatex">\(\pm 2\pi\)</span>$ depending on the <code>side</code> ('left' =&gt; +2, 'right' =&gt; -2).
      The start angle is computed so that the tangent/heading at the start
      matches the requested mission heading.
- AreaTask:
    - Constructs a boustrophedon (back-and-forth) pattern consisting of
      straight passes (LineSegment) and semicircular end-turns (CurveSegment).
      The semicircle radius used for turns is $<span class="arithmatex">\(r_{turn} = rac{    ext{pass\_spacing}}{2}\)</span>$.</p>
<p>Parameters:
- $<span class="arithmatex">\(uav\)</span>$: UAV instance providing current pose and parameters (used for default heading).
- $<span class="arithmatex">\(task\)</span>$: Task instance describing the required coverage.</p>
        <ul>
<li>Path containing the sequence of segments to cover the task area, or
  an empty Path for tasks that need no intratask traversal (PointTask).</li>
</ul>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_planner.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plan_mission_path</span><span class="p">(</span><span class="n">uav</span><span class="p">:</span> <span class="n">UAV</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Path</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Build the coverage path required to perform the given Task. The returned</span>
<span class="sd">    Path describes how the UAV should traverse the geometry inside the task.</span>

<span class="sd">    Summary per task type:</span>
<span class="sd">    - PointTask:</span>
<span class="sd">        - No coverage path inside the task: returns an empty Path `[]`.</span>
<span class="sd">    - LineTask:</span>
<span class="sd">        - Returns a single straight LineSegment of length `task.length` starting</span>
<span class="sd">          at the task position and oriented along the mission heading.</span>
<span class="sd">    - CircleTask:</span>
<span class="sd">        - Returns a single full-circle CurveSegment centered so the circle</span>
<span class="sd">          passes through the task position and starts with the specified heading.</span>
<span class="sd">          The sweep is $$\pm 2\pi$$ depending on the `side` (&#39;left&#39; =&gt; +2, &#39;right&#39; =&gt; -2).</span>
<span class="sd">          The start angle is computed so that the tangent/heading at the start</span>
<span class="sd">          matches the requested mission heading.</span>
<span class="sd">    - AreaTask:</span>
<span class="sd">        - Constructs a boustrophedon (back-and-forth) pattern consisting of</span>
<span class="sd">          straight passes (LineSegment) and semicircular end-turns (CurveSegment).</span>
<span class="sd">          The semicircle radius used for turns is $$r_{turn} = \frac{\text{pass\_spacing}}{2}$$.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - $$uav$$: UAV instance providing current pose and parameters (used for default heading).</span>
<span class="sd">    - $$task$$: Task instance describing the required coverage.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - Path containing the sequence of segments to cover the task area, or</span>
<span class="sd">      an empty Path for tasks that need no intratask traversal (PointTask).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">position</span>
    <span class="c1"># Choose mission heading: if the task enforces a heading use it; otherwise use UAV heading</span>
    <span class="n">base_heading</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">heading</span> <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">heading_enforcement</span> <span class="k">else</span> <span class="n">uav</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">PointTask</span><span class="p">):</span>
        <span class="c1"># No traversal required inside a point task</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">([])</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">LineTask</span><span class="p">):</span>
        <span class="c1"># Create a straight pass starting at the task position in direction base_heading</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">LineTask</span><span class="p">)</span>
        <span class="n">end_x</span> <span class="o">=</span> <span class="n">xe</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">base_heading</span><span class="p">)</span>
        <span class="n">end_y</span> <span class="o">=</span> <span class="n">ye</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">base_heading</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">([</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="p">(</span><span class="n">end_x</span><span class="p">,</span> <span class="n">end_y</span><span class="p">))])</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">CircleTask</span><span class="p">):</span>
        <span class="c1"># Full-circle traversal: choose sweep sign by side and compute circle center</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">CircleTask</span><span class="p">)</span>
        <span class="n">d_theta</span> <span class="o">=</span> <span class="o">+</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">side</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span> <span class="k">else</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
        <span class="c1"># Start angle: offset such that the circle tangent aligns with base_heading.</span>
        <span class="c1"># We move start angle by +/- pi/2 depending on the sweep sign:</span>
        <span class="n">theta_s</span> <span class="o">=</span> <span class="n">base_heading</span> <span class="o">-</span> <span class="n">sgn</span><span class="p">(</span><span class="n">d_theta</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="c1"># Compute circle center so the circle of radius R passes through the task point (xe, ye).</span>
        <span class="c1"># We place center on the ray from the task via angle (theta_s + pi).</span>
        <span class="n">xc</span> <span class="o">=</span> <span class="n">xe</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta_s</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">yc</span> <span class="o">=</span> <span class="n">ye</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_s</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">([</span><span class="n">CurveSegment</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">xc</span><span class="p">,</span> <span class="n">yc</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="n">task</span><span class="o">.</span><span class="n">radius</span><span class="p">,</span> <span class="n">theta_s</span><span class="o">=</span><span class="n">theta_s</span><span class="p">,</span> <span class="n">d_theta</span><span class="o">=</span><span class="n">d_theta</span><span class="p">)])</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">AreaTask</span><span class="p">):</span>
        <span class="c1"># Boustrophedon pattern: alternating straight passes and semicircular turns.</span>
        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">AreaTask</span><span class="p">)</span>
        <span class="n">segs</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Segment</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Semicircle radius used at pass ends:</span>
        <span class="n">r_turn</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">pass_spacing</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="c1"># Starting position for the first pass</span>
        <span class="n">x_curr</span><span class="p">,</span> <span class="n">y_curr</span> <span class="o">=</span> <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">task</span><span class="o">.</span><span class="n">num_passes</span><span class="p">):</span>
            <span class="c1"># Alternate pass direction: even -&gt; base_heading, odd -&gt; base_heading + pi</span>
            <span class="n">heading_i</span> <span class="o">=</span> <span class="n">base_heading</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="p">(</span><span class="n">base_heading</span> <span class="o">+</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
            <span class="c1"># Straight pass end point</span>
            <span class="n">x_end</span> <span class="o">=</span> <span class="n">x_curr</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="n">pass_length</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">heading_i</span><span class="p">)</span>
            <span class="n">y_end</span> <span class="o">=</span> <span class="n">y_curr</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="n">pass_length</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">heading_i</span><span class="p">)</span>
            <span class="n">segs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="p">(</span><span class="n">x_curr</span><span class="p">,</span> <span class="n">y_curr</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="p">(</span><span class="n">x_end</span><span class="p">,</span> <span class="n">y_end</span><span class="p">)))</span>

            <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">task</span><span class="o">.</span><span class="n">num_passes</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># No turn after the last pass</span>
                <span class="k">break</span>

            <span class="c1"># Determine turn side to shift laterally by pass_spacing.</span>
            <span class="c1"># We alternate the turn side so that passes are offset correctly.</span>
            <span class="n">turn_side</span> <span class="o">=</span> <span class="n">task</span><span class="o">.</span><span class="n">side</span> <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="k">else</span> <span class="p">(</span><span class="s1">&#39;right&#39;</span> <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">side</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span> <span class="k">else</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
            <span class="c1"># Normal direction relative to current heading: +pi/2 for left, -pi/2 for right</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="k">if</span> <span class="n">turn_side</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span> <span class="k">else</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="mf">2.0</span>
            <span class="c1"># Semicircle center offset from the end point along the normal direction</span>
            <span class="n">cx</span> <span class="o">=</span> <span class="n">x_end</span> <span class="o">+</span> <span class="n">r_turn</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">heading_i</span> <span class="o">+</span> <span class="n">normal</span><span class="p">)</span>
            <span class="n">cy</span> <span class="o">=</span> <span class="n">y_end</span> <span class="o">+</span> <span class="n">r_turn</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">heading_i</span> <span class="o">+</span> <span class="n">normal</span><span class="p">)</span>
            <span class="c1"># Angle from center to starting point of the turn (end of straight pass)</span>
            <span class="n">theta_s</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">y_end</span> <span class="o">-</span> <span class="n">cy</span><span class="p">,</span> <span class="n">x_end</span> <span class="o">-</span> <span class="n">cx</span><span class="p">)</span>
            <span class="c1"># Semicircle sweep: +pi for left-turn (CCW), -pi for right-turn (CW)</span>
            <span class="n">d_theta</span> <span class="o">=</span> <span class="o">+</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="k">if</span> <span class="n">turn_side</span> <span class="o">==</span> <span class="s1">&#39;left&#39;</span> <span class="k">else</span> <span class="o">-</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
            <span class="n">segs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">CurveSegment</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">),</span> <span class="n">radius</span><span class="o">=</span><span class="n">r_turn</span><span class="p">,</span> <span class="n">theta_s</span><span class="o">=</span><span class="n">theta_s</span><span class="p">,</span> <span class="n">d_theta</span><span class="o">=</span><span class="n">d_theta</span><span class="p">))</span>
            <span class="c1"># Update current point to the end of the semicircle (start of next pass)</span>
            <span class="n">theta_e</span> <span class="o">=</span> <span class="n">theta_s</span> <span class="o">+</span> <span class="n">d_theta</span>
            <span class="n">x_curr</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">r_turn</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta_e</span><span class="p">)</span>
            <span class="n">y_curr</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">r_turn</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta_e</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">segs</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown task type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">task</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.plan_path_to_task" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">plan_path_to_task</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">uid</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">t_pose</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Path</span></code>

<a href="#multi_uav_planner.plan_path_to_task" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Plan a feasible path (sequence of segments) that brings UAV <code>uid</code> from its
current pose to the task entry pose <code>t_pose</code>.</p>
<p>Policy summary (priority and fallbacks):
  1) If the UAV is already co-located with the task position within positional tolerance:
     - If the requested entry heading is unconstrained (None) or matches the UAV heading
       within angular tolerance, return an empty Path (no motion required).
     - Otherwise, perform an in-place heading adjustment using the shortest CSC path
       (which reduces to a pure rotational maneuver when spatial displacement is zero).
  2) Try a single straight-line (LineSegment) if headings permit:
     - For unconstrained task entry heading (the is None), only the UAV's heading
       must be aligned with the line to the target.
     - For constrained task entry heading, both the UAV heading and the desired
       task heading must be aligned with the line direction within angular tolerance.
  3) Otherwise use Dubins-style constructions (turns of radius $<span class="arithmatex">\(R\)</span>$):
     - If the task entry heading is unconstrained: compute the shortest CS path
       using <code>cs_segments_shortest</code>.
     - If the task entry heading is constrained:
         a) Try CS candidates (LS/RS) that end with a straight-line segment oriented
            so that the straight segment's heading matches the desired task heading
            within angular tolerance; pick the shortest feasible such CS if any.
         b) If none of the CS candidates satisfy the heading constraint or are infeasible,
            fall back to the shortest CSC path via <code>csc_segments_shortest</code>.</p>
<p>Parameters:
- $<span class="arithmatex">\(world\)</span>$: World object giving UAV states and tolerances.
- $<span class="arithmatex">\(uid\)</span>$: UAV identifier (must be a key in $<span class="arithmatex">\(world.uavs\)</span>$).
- $<span class="arithmatex">\(t\_pose\)</span>$: target pose tuple $<span class="arithmatex">\((x_e, y_e,       heta_e)\)</span>$ where $$      heta_e$$ may be $<span class="arithmatex">\(None\)</span>$
             if the entry heading is unconstrained.</p>
<p>Returns:
- Path instance representing the planned sequence of segments.</p>
<p>Notes and assumptions:
- UAV minimum turn radius $<span class="arithmatex">\(R\)</span>$ is read from the UAV object and must be positive.
- Angular comparisons use the world's tolerances $<span class="arithmatex">\(world.tols.ang\)</span>$ and positional
  comparisons use $<span class="arithmatex">\(world.tols.pos\)</span>$.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\path_planner.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">plan_path_to_task</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">uid</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">t_pose</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">,</span><span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Plan a feasible path (sequence of segments) that brings UAV `uid` from its</span>
<span class="sd">    current pose to the task entry pose `t_pose`.</span>

<span class="sd">    Policy summary (priority and fallbacks):</span>
<span class="sd">      1) If the UAV is already co-located with the task position within positional tolerance:</span>
<span class="sd">         - If the requested entry heading is unconstrained (None) or matches the UAV heading</span>
<span class="sd">           within angular tolerance, return an empty Path (no motion required).</span>
<span class="sd">         - Otherwise, perform an in-place heading adjustment using the shortest CSC path</span>
<span class="sd">           (which reduces to a pure rotational maneuver when spatial displacement is zero).</span>
<span class="sd">      2) Try a single straight-line (LineSegment) if headings permit:</span>
<span class="sd">         - For unconstrained task entry heading (the is None), only the UAV&#39;s heading</span>
<span class="sd">           must be aligned with the line to the target.</span>
<span class="sd">         - For constrained task entry heading, both the UAV heading and the desired</span>
<span class="sd">           task heading must be aligned with the line direction within angular tolerance.</span>
<span class="sd">      3) Otherwise use Dubins-style constructions (turns of radius $$R$$):</span>
<span class="sd">         - If the task entry heading is unconstrained: compute the shortest CS path</span>
<span class="sd">           using `cs_segments_shortest`.</span>
<span class="sd">         - If the task entry heading is constrained:</span>
<span class="sd">             a) Try CS candidates (LS/RS) that end with a straight-line segment oriented</span>
<span class="sd">                so that the straight segment&#39;s heading matches the desired task heading</span>
<span class="sd">                within angular tolerance; pick the shortest feasible such CS if any.</span>
<span class="sd">             b) If none of the CS candidates satisfy the heading constraint or are infeasible,</span>
<span class="sd">                fall back to the shortest CSC path via `csc_segments_shortest`.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - $$world$$: World object giving UAV states and tolerances.</span>
<span class="sd">    - $$uid$$: UAV identifier (must be a key in $$world.uavs$$).</span>
<span class="sd">    - $$t\_pose$$: target pose tuple $$(x_e, y_e, \theta_e)$$ where $$\theta_e$$ may be $$None$$</span>
<span class="sd">                 if the entry heading is unconstrained.</span>

<span class="sd">    Returns:</span>
<span class="sd">    - Path instance representing the planned sequence of segments.</span>

<span class="sd">    Notes and assumptions:</span>
<span class="sd">    - UAV minimum turn radius $$R$$ is read from the UAV object and must be positive.</span>
<span class="sd">    - Angular comparisons use the world&#39;s tolerances $$world.tols.ang$$ and positional</span>
<span class="sd">      comparisons use $$world.tols.pos$$.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">th0</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">position</span>
    <span class="n">R</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">uid</span><span class="p">]</span><span class="o">.</span><span class="n">turn_radius</span>
    <span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">,</span> <span class="n">the</span> <span class="o">=</span> <span class="n">t_pose</span>
    <span class="n">tols</span> <span class="o">=</span> <span class="n">world</span><span class="o">.</span><span class="n">tols</span>

    <span class="k">if</span> <span class="n">R</span> <span class="o">&lt;=</span> <span class="mf">0.0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;UAV minimum turn radius must be positive!&quot;</span><span class="p">)</span>

    <span class="c1"># 1) Co-located check: if position difference within tolerance</span>
    <span class="k">if</span> <span class="n">_distance</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">tols</span><span class="o">.</span><span class="n">pos</span><span class="p">:</span>
        <span class="c1"># If heading is unconstrained or matches within tolerance, no motion required</span>
        <span class="k">if</span> <span class="n">the</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_angle_diff</span><span class="p">(</span><span class="n">th0</span><span class="p">,</span> <span class="n">the</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">tols</span><span class="o">.</span><span class="n">ang</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Path</span><span class="p">([])</span>
        <span class="c1"># Else, adjust heading in place using CSC (degenerate straight length)</span>
        <span class="k">return</span> <span class="n">csc_segments_shortest</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">th0</span><span class="p">),</span> <span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">,</span> <span class="n">the</span><span class="p">),</span> <span class="n">R</span><span class="p">)</span>

    <span class="c1"># 2) Straight-line feasibility check</span>
    <span class="n">dir_to_target</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">ye</span> <span class="o">-</span> <span class="n">y0</span><span class="p">,</span> <span class="n">xe</span> <span class="o">-</span> <span class="n">x0</span><span class="p">)</span>
    <span class="c1"># For unconstrained entry heading: only UAV heading must align with the line</span>
    <span class="k">if</span> <span class="n">the</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_angle_diff</span><span class="p">(</span><span class="n">th0</span><span class="p">,</span> <span class="n">dir_to_target</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">tols</span><span class="o">.</span><span class="n">ang</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">([</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">))])</span>
    <span class="c1"># For constrained entry heading: both UAV and desired heading must align with the line</span>
    <span class="k">if</span> <span class="n">the</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_angle_diff</span><span class="p">(</span><span class="n">th0</span><span class="p">,</span> <span class="n">dir_to_target</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">tols</span><span class="o">.</span><span class="n">ang</span> <span class="ow">and</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_angle_diff</span><span class="p">(</span><span class="n">the</span><span class="p">,</span> <span class="n">dir_to_target</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">tols</span><span class="o">.</span><span class="n">ang</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Path</span><span class="p">([</span><span class="n">LineSegment</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">))])</span>

    <span class="c1"># 3) Dubins-style constructions</span>
    <span class="k">if</span> <span class="n">the</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Only a CS path is needed (final heading unconstrained)</span>
        <span class="k">return</span> <span class="n">cs_segments_shortest</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">th0</span><span class="p">),</span> <span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">),</span> <span class="n">R</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Try CS candidates (LS, RS) and filter those whose final straight-line</span>
        <span class="c1"># heading matches the requested task heading within tolerance.</span>
        <span class="n">cs_candidates</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">cs_segments_single</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">th0</span><span class="p">),</span> <span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">),</span> <span class="n">R</span><span class="p">,</span> <span class="n">pt</span><span class="p">)</span> <span class="k">for</span> <span class="n">pt</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;LS&quot;</span><span class="p">,</span> <span class="s2">&quot;RS&quot;</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="n">cs_feasible</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cs_candidates</span> <span class="k">if</span> <span class="n">p</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
        <span class="c1"># Filter by final-line heading</span>
        <span class="n">filtered</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cs_feasible</span><span class="p">:</span>
            <span class="n">last</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">segments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">last</span><span class="p">,</span> <span class="n">LineSegment</span><span class="p">):</span>
                <span class="n">line_h</span> <span class="o">=</span> <span class="n">_line_heading</span><span class="p">(</span><span class="n">last</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">_angle_diff</span><span class="p">(</span><span class="n">line_h</span><span class="p">,</span> <span class="n">the</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="n">tols</span><span class="o">.</span><span class="n">ang</span><span class="p">:</span>
                    <span class="n">filtered</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filtered</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">filtered</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">p</span><span class="p">:</span> <span class="n">p</span><span class="o">.</span><span class="n">length</span><span class="p">())</span>

        <span class="c1"># No CS candidate meets the heading requirement; use the shortest CSC path</span>
        <span class="k">return</span> <span class="n">csc_segments_shortest</span><span class="p">((</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">th0</span><span class="p">),</span> <span class="p">(</span><span class="n">xe</span><span class="p">,</span> <span class="n">ye</span><span class="p">,</span> <span class="n">the</span><span class="p">),</span> <span class="n">R</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.return_to_base" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">return_to_base</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">use_dubins</span><span class="p">)</span></code>

<a href="#multi_uav_planner.return_to_base" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Send all idle UAVs back to base.</p>
<p>Parameters:
- $<span class="arithmatex">\(world\)</span>$: World instance whose <code>idle_uavs</code> set will be processed.
- $<span class="arithmatex">\(use\_dubins\)</span>$: if True use <code>plan_path_to_task</code> (Dubins-aware planner)
  to compute a feasible path to the base pose; otherwise assign a single
  straight-line <code>LineSegment</code> path to the base.</p>
<p>Side effects:
- Moves each idle UAV into the <code>transit</code> partition and sets its state to 1.
- Updates <code>uav.assigned_path</code> for each UAV accordingly.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\stepping_fcts.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">return_to_base</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">use_dubins</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Send all idle UAVs back to base.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - $$world$$: World instance whose ``idle_uavs`` set will be processed.</span>
<span class="sd">    - $$use\_dubins$$: if True use ``plan_path_to_task`` (Dubins-aware planner)</span>
<span class="sd">      to compute a feasible path to the base pose; otherwise assign a single</span>
<span class="sd">      straight-line ``LineSegment`` path to the base.</span>

<span class="sd">    Side effects:</span>
<span class="sd">    - Moves each idle UAV into the ``transit`` partition and sets its state to 1.</span>
<span class="sd">    - Updates ``uav.assigned_path`` for each UAV accordingly.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="p">):</span>
        <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">use_dubins</span><span class="p">:</span>
            <span class="c1"># Compute a Dubins-style path back to base (more realistic)</span>
            <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">assigned_path</span> <span class="o">=</span> <span class="n">plan_path_to_task</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">world</span><span class="o">.</span><span class="n">base</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Simple straight-line return: single LineSegment from current position to base</span>
            <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">assigned_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span>
                <span class="n">segments</span><span class="o">=</span><span class="p">[</span><span class="n">LineSegment</span><span class="p">((</span><span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">.</span><span class="n">position</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                                      <span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">base</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">world</span><span class="o">.</span><span class="n">base</span><span class="p">[</span><span class="mi">1</span><span class="p">]))]</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.save_csv_rows" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_csv_rows</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">rows</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span> <span class="o">...</span><span class="p">]])</span></code>

<a href="#multi_uav_planner.save_csv_rows" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Write rows (sequence of tuples) to a CSV file with optional header.</p>
<p>Parameters:
- path: output file path.
- header: list of column names. If empty, no header row is written.
- rows: iterable of tuples representing CSV rows.</p>
<p>Notes:
- Uses newline='' when opening the file for cross-platform CSV writing.
- Values are written verbatim using the default csv.writer formatting.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">save_csv_rows</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">rows</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">Any</span><span class="p">,</span><span class="o">...</span><span class="p">]]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write rows (sequence of tuples) to a CSV file with optional header.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - path: output file path.</span>
<span class="sd">    - header: list of column names. If empty, no header row is written.</span>
<span class="sd">    - rows: iterable of tuples representing CSV rows.</span>

<span class="sd">    Notes:</span>
<span class="sd">    - Uses newline=&#39;&#39; when opening the file for cross-platform CSV writing.</span>
<span class="sd">    - Values are written verbatim using the default csv.writer formatting.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.simulate_mission" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">simulate_mission</span><span class="p">(</span><span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span> <span class="n">scenario</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Scenario</span><span class="p">],</span> <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">max_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">100.0</span><span class="p">,</span> <span class="n">N_stall</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="n">on_step</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">World</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span></code>

<a href="#multi_uav_planner.simulate_mission" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Run a discrete-time simulation of the multi-UAV mission until completion or timeout.</p>
<p>Parameters
- $<span class="arithmatex">\(world\)</span>$: a World object that will be advanced in-place. If the world is not
             initialized (<code>world.is_initialized()</code> returns False), the function
             will initialize it using <code>scenario</code> or by synthesizing one.
- $<span class="arithmatex">\(scenario\)</span>$: optional Scenario used to initialize the world if necessary.
                If None, a default ScenarioConfig is used and a scenario is
                generated internally.
- $<span class="arithmatex">\(dt\)</span>$: simulation time step in seconds (default: $<span class="arithmatex">\(0.1\)</span>$).
- $<span class="arithmatex">\(max\_time\)</span>$: safety upper bound on simulation time in seconds; simulation
                aborts if exceeded (default: $<span class="arithmatex">\(1    imes 10^2\)</span>$).
- $<span class="arithmatex">\(N\_stall\)</span>$: number of consecutive ticks with no UAV movement after which
               the simulation prints a stall warning and aborts (reserved).
- $<span class="arithmatex">\(on\_step\)</span>$: optional callback <code>on_step(world, tag)</code> invoked at several
               logical points; useful for logging or visualization. Tags used:
               - <code>"init"</code>: after initialization,
               - <code>"triggering_events"</code>: after event processing,
               - <code>"assignment"</code>: after assignment step,
               - <code>"after_move"</code>: after moving transit UAVs,
               - <code>"end_tick (post_coverage)"</code>: end of tick,
               - <code>"planned_return"</code>: after scheduling return-to-base.</p>
<p>High-level loop (per tick):
  1. Process pending events whose trigger time &lt;= world.time.
  2. If using PRBDD, run clustering once at initialization.
  3. If there are idle UAVs and unassigned tasks, run the selected assignment
     algorithm to produce committed UAV-&gt;task assignments.
  4. Advance UAVs that are in-transit (move_in_transit).
  5. Advance UAVs that are executing tasks (perform_task).
  6. Detect stalls (no UAV moved) and abort if they persist for $<span class="arithmatex">\(N\_stall\)</span>$ ticks.
  7. Increment world.time by $<span class="arithmatex">\(dt\)</span>$ and continue until all tasks are completed
     and all UAVs have returned to base (see stopping condition below).</p>
<p>Stopping condition:
- The main loop continues while:
    - not <code>world.done()</code> (i.e., there remain unassigned or assigned tasks)
    OR
    - not <code>world.at_base()</code> (i.e., UAVs are yet to be at base).
  When the world has no pending tasks but UAVs are not at base, the
  simulator triggers <code>return_to_base</code> for idle UAVs and continues until they
  reach base or time limit / stall aborts the run.</p>
<p>Side effects:
- The function mutates <code>world</code> (tasks/UAVs/partitions/time) and may call
  assignment and path-planning routines that set UAV assigned paths.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\simulation_loop.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">simulate_mission</span><span class="p">(</span>
    <span class="n">world</span><span class="p">:</span> <span class="n">World</span><span class="p">,</span>
    <span class="n">scenario</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Scenario</span><span class="p">],</span>
    <span class="n">dt</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="n">max_time</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1e2</span><span class="p">,</span>
    <span class="n">N_stall</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>  <span class="c1"># reserved for future stall detection</span>
    <span class="n">on_step</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">[[</span><span class="n">World</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>  <span class="c1"># recorder hook</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run a discrete-time simulation of the multi-UAV mission until completion or timeout.</span>

<span class="sd">    Parameters</span>
<span class="sd">    - $$world$$: a World object that will be advanced in-place. If the world is not</span>
<span class="sd">                 initialized (``world.is_initialized()`` returns False), the function</span>
<span class="sd">                 will initialize it using `scenario` or by synthesizing one.</span>
<span class="sd">    - $$scenario$$: optional Scenario used to initialize the world if necessary.</span>
<span class="sd">                    If None, a default ScenarioConfig is used and a scenario is</span>
<span class="sd">                    generated internally.</span>
<span class="sd">    - $$dt$$: simulation time step in seconds (default: $$0.1$$).</span>
<span class="sd">    - $$max\_time$$: safety upper bound on simulation time in seconds; simulation</span>
<span class="sd">                    aborts if exceeded (default: $$1 \times 10^2$$).</span>
<span class="sd">    - $$N\_stall$$: number of consecutive ticks with no UAV movement after which</span>
<span class="sd">                   the simulation prints a stall warning and aborts (reserved).</span>
<span class="sd">    - $$on\_step$$: optional callback ``on_step(world, tag)`` invoked at several</span>
<span class="sd">                   logical points; useful for logging or visualization. Tags used:</span>
<span class="sd">                   - ``&quot;init&quot;``: after initialization,</span>
<span class="sd">                   - ``&quot;triggering_events&quot;``: after event processing,</span>
<span class="sd">                   - ``&quot;assignment&quot;``: after assignment step,</span>
<span class="sd">                   - ``&quot;after_move&quot;``: after moving transit UAVs,</span>
<span class="sd">                   - ``&quot;end_tick (post_coverage)&quot;``: end of tick,</span>
<span class="sd">                   - ``&quot;planned_return&quot;``: after scheduling return-to-base.</span>

<span class="sd">    High-level loop (per tick):</span>
<span class="sd">      1. Process pending events whose trigger time &lt;= world.time.</span>
<span class="sd">      2. If using PRBDD, run clustering once at initialization.</span>
<span class="sd">      3. If there are idle UAVs and unassigned tasks, run the selected assignment</span>
<span class="sd">         algorithm to produce committed UAV-&gt;task assignments.</span>
<span class="sd">      4. Advance UAVs that are in-transit (move_in_transit).</span>
<span class="sd">      5. Advance UAVs that are executing tasks (perform_task).</span>
<span class="sd">      6. Detect stalls (no UAV moved) and abort if they persist for $$N\_stall$$ ticks.</span>
<span class="sd">      7. Increment world.time by $$dt$$ and continue until all tasks are completed</span>
<span class="sd">         and all UAVs have returned to base (see stopping condition below).</span>

<span class="sd">    Stopping condition:</span>
<span class="sd">    - The main loop continues while:</span>
<span class="sd">        - not ``world.done()`` (i.e., there remain unassigned or assigned tasks)</span>
<span class="sd">        OR</span>
<span class="sd">        - not ``world.at_base()`` (i.e., UAVs are yet to be at base).</span>
<span class="sd">      When the world has no pending tasks but UAVs are not at base, the</span>
<span class="sd">      simulator triggers `return_to_base` for idle UAVs and continues until they</span>
<span class="sd">      reach base or time limit / stall aborts the run.</span>

<span class="sd">    Side effects:</span>
<span class="sd">    - The function mutates ``world`` (tasks/UAVs/partitions/time) and may call</span>
<span class="sd">      assignment and path-planning routines that set UAV assigned paths.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Initialize world if needed</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">world</span><span class="o">.</span><span class="n">is_initialized</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">scenario</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cfg</span> <span class="o">=</span> <span class="n">ScenarioConfig</span><span class="p">()</span>
            <span class="n">scenario</span> <span class="o">=</span> <span class="n">generate_scenario</span><span class="p">(</span><span class="n">cfg</span><span class="p">)</span>
        <span class="n">initialize_world</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">scenario</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">on_step</span><span class="p">:</span>
            <span class="n">on_step</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="s2">&quot;init&quot;</span><span class="p">)</span>

    <span class="c1"># For PRBDD workflow, perform initial clustering to populate UAV clusters</span>
    <span class="k">if</span> <span class="n">scenario</span><span class="o">.</span><span class="n">alg_type</span> <span class="ow">is</span> <span class="n">AlgorithmType</span><span class="o">.</span><span class="n">PRBDD</span><span class="p">:</span>
        <span class="n">cluster_tasks</span><span class="p">(</span><span class="n">world</span><span class="p">)</span>

    <span class="n">stall</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Main simulation loop: iterate until mission finished and UAVs are at base</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">world</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">world</span><span class="o">.</span><span class="n">at_base</span><span class="p">():</span>
        <span class="c1"># -------------------------------</span>
        <span class="c1"># 1) Process events (new tasks, UAV damage)</span>
        <span class="c1"># -------------------------------</span>
        <span class="n">check_for_events</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">scenario</span><span class="o">.</span><span class="n">alg_type</span> <span class="ow">is</span> <span class="n">AlgorithmType</span><span class="o">.</span><span class="n">PRBDD</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">on_step</span><span class="p">:</span>
            <span class="n">on_step</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="s2">&quot;triggering_events&quot;</span><span class="p">)</span>

        <span class="c1"># -------------------------------</span>
        <span class="c1"># 2) Assignment step (idle UAVs -&gt; unassigned tasks)</span>
        <span class="c1"># -------------------------------</span>
        <span class="k">if</span> <span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span> <span class="ow">and</span> <span class="n">world</span><span class="o">.</span><span class="n">unassigned</span><span class="p">:</span>
            <span class="n">assignment</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">scenario</span><span class="o">.</span><span class="n">alg_type</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">on_step</span><span class="p">:</span>
            <span class="n">on_step</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="s2">&quot;assignment&quot;</span><span class="p">)</span>

        <span class="c1"># -------------------------------</span>
        <span class="c1"># 3) Advance UAVs in-transit along their assigned paths</span>
        <span class="c1"># -------------------------------</span>
        <span class="n">transit_moved</span> <span class="o">=</span> <span class="n">move_in_transit</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">on_step</span><span class="p">:</span>
            <span class="n">on_step</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="s2">&quot;after_move&quot;</span><span class="p">)</span>

        <span class="c1"># -------------------------------</span>
        <span class="c1"># 4) Advance UAVs that are executing tasks (coverage)</span>
        <span class="c1"># -------------------------------</span>
        <span class="n">mission_moved</span> <span class="o">=</span> <span class="n">perform_task</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>

        <span class="c1"># -------------------------------</span>
        <span class="c1"># 5) Stall detection: abort if no UAV moved for N_stall ticks</span>
        <span class="c1"># -------------------------------</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">transit_moved</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">mission_moved</span><span class="p">:</span>
            <span class="n">stall</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">stall</span> <span class="o">&gt;=</span> <span class="n">N_stall</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: Simulation is stalled, Simulation aborted&quot;</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">stall</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># -------------------------------</span>
        <span class="c1"># 6) Advance global simulation time and notify observers</span>
        <span class="c1"># -------------------------------</span>
        <span class="n">world</span><span class="o">.</span><span class="n">time</span> <span class="o">+=</span> <span class="n">dt</span>
        <span class="k">if</span> <span class="n">on_step</span><span class="p">:</span>
            <span class="n">on_step</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="s2">&quot;end_tick (post_coverage)&quot;</span><span class="p">)</span>

        <span class="c1"># Safety: abort if simulation time exceeds the configured limit</span>
        <span class="k">if</span> <span class="n">world</span><span class="o">.</span><span class="n">time</span> <span class="o">&gt;</span> <span class="n">max_time</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Simulation aborted: time limit exceeded&quot;</span><span class="p">)</span>
            <span class="k">break</span>

        <span class="c1"># If all tasks are complete but UAVs are not yet at base and there are no</span>
        <span class="c1"># active transit/busy UAVs, schedule a return-to-base for idle UAVs.</span>
        <span class="k">if</span> <span class="n">world</span><span class="o">.</span><span class="n">done</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">world</span><span class="o">.</span><span class="n">at_base</span><span class="p">()</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span><span class="p">:</span>
            <span class="n">return_to_base</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">scenario</span><span class="o">.</span><span class="n">alg_type</span> <span class="ow">in</span> <span class="p">{</span><span class="n">AlgorithmType</span><span class="o">.</span><span class="n">PRBDD</span><span class="p">,</span> <span class="n">AlgorithmType</span><span class="o">.</span><span class="n">RBDD</span><span class="p">})</span>
            <span class="k">if</span> <span class="n">on_step</span><span class="p">:</span>
                <span class="n">on_step</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="s2">&quot;planned_return&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.summarize_uav_path_lengths" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">summarize_uav_path_lengths</span><span class="p">(</span><span class="n">uav_paths</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]</span></code>

<a href="#multi_uav_planner.summarize_uav_path_lengths" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return summary statistics over planned path lengths.</p>
<p>The returned dict contains <code>total</code>, <code>avg</code>, <code>max</code>, and <code>min</code> values. If no
paths are provided, zeros are returned.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">summarize_uav_path_lengths</span><span class="p">(</span><span class="n">uav_paths</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Path</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return summary statistics over planned path lengths.</span>

<span class="sd">    The returned dict contains `total`, `avg`, `max`, and `min` values. If no</span>
<span class="sd">    paths are provided, zeros are returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lengths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">compute_uav_path_lengths</span><span class="p">(</span><span class="n">uav_paths</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">lengths</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;avg&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">}</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="n">total</span><span class="p">,</span>
        <span class="s2">&quot;avg&quot;</span><span class="p">:</span> <span class="n">total</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">lengths</span><span class="p">),</span>
        <span class="s2">&quot;max&quot;</span><span class="p">:</span> <span class="nb">max</span><span class="p">(</span><span class="n">lengths</span><span class="p">),</span>
        <span class="s2">&quot;min&quot;</span><span class="p">:</span> <span class="nb">min</span><span class="p">(</span><span class="n">lengths</span><span class="p">),</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="multi_uav_planner.summarize_world" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">summarize_world</span><span class="p">(</span><span class="n">world</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

<a href="#multi_uav_planner.summarize_world" class="headerlink" title="Permanent link">&para;</a></h3>


    <div class="doc doc-contents ">

        <p>Return a small dictionary summarizing the final world state.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src\multi_uav_planner\post_processing.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">summarize_world</span><span class="p">(</span><span class="n">world</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a small dictionary summarizing the final world state.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;time_final&quot;</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">time</span><span class="p">,</span>
        <span class="s2">&quot;n_tasks_total&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">tasks</span><span class="p">),</span>
        <span class="s2">&quot;n_unassigned&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">unassigned</span><span class="p">),</span>
        <span class="s2">&quot;n_assigned&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">assigned</span><span class="p">),</span>
        <span class="s2">&quot;n_completed&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">completed</span><span class="p">),</span>
        <span class="s2">&quot;n_uavs&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">uavs</span><span class="p">),</span>
        <span class="s2">&quot;n_idle&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">idle_uavs</span><span class="p">),</span>
        <span class="s2">&quot;n_transit&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">transit_uavs</span><span class="p">),</span>
        <span class="s2">&quot;n_busy&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">busy_uavs</span><span class="p">),</span>
        <span class="s2">&quot;n_damaged&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">world</span><span class="o">.</span><span class="n">damaged_uavs</span><span class="p">),</span>
        <span class="s2">&quot;at_base&quot;</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">at_base</span><span class="p">(),</span>
        <span class="s2">&quot;done&quot;</span><span class="p">:</span> <span class="n">world</span><span class="o">.</span><span class="n">done</span><span class="p">(),</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/LucianNita/Drone-case-study" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.top", "navigation.sections", "navigation.instant", "toc.integrate", "content.code.copy", "content.tabs.link", "header.autohide"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
      
        <script src="../../js/math-render.js"></script>
      
    
  </body>
</html>